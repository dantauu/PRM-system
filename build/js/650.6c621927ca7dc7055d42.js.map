{"version":3,"file":"js/650.6c621927ca7dc7055d42.js","mappings":"2NAKWA,EAAqB,SAAUC,GACtC,IAAIC,EAAYD,EAAGC,UAAWC,EAAQF,EAAGE,MAAOC,EAAQH,EAAGG,MAAOC,EAAWJ,EAAGI,SAAUC,EAAiBL,EAAGK,eAAgBC,EAAiBN,EAAGM,eAAgBC,EAAkBP,EAAGO,gBAEnLC,EAAY,IAAW,uBAAwBP,GACnD,OAAQ,UAAM,MAAO,CAAEA,UAAWO,EAAWC,SAAU,EAAC,SAAK,MAAO,CAAER,UAAW,oCAAqCQ,SAAUJ,KAAmB,SAAK,MAAO,CAAEK,IAAKR,GAAS,EAAsBD,UAAW,iCAAkC,UAAM,MAAO,CAAEA,UAAW,6BAA8BQ,SAAU,EAAC,SAAK,MAAO,CAAER,UAAW,8BAA+BQ,SAAUN,KAAU,SAAK,MAAO,CAAEF,UAAW,iCAAkCQ,SAAUL,QAAiB,UAAM,MAAO,CAAEH,UAAW,gCAAiCQ,SAAU,EAAC,SAAK,MAAO,CAAER,UAAW,oCAAqCQ,SAAUH,KAAmB,SAAK,MAAO,CAAEL,UAAW,qCAAsCQ,SAAUF,SACrsB,EACWI,GAAyB,IAAAC,MAAKb,G,UCXrCc,EAAsC,WAStC,OARAA,EAAWC,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,CACX,EACOH,EAASa,MAAMC,KAAMP,UAChC,EAaO,SAASQ,EAA8B5B,GAC1C,IAAI6B,EAAa7B,EAAG6B,WAAYC,EAA4B9B,EAAG8B,0BAC/D,OAAOjB,EAASA,EAAS,CAAC,EAAGgB,GAAa,CAAEE,OAAQD,GACxD,CACO,SAASE,EAAuBhC,GACnC,IAAIiC,EAAWjC,EAAGiC,SAAUC,EAAQlC,EAAGkC,MAAOC,EAAWnC,EAAGmC,SAAUC,EAAWpC,EAAGoC,SACpF,OAAOvB,EAASA,EAAS,CAAC,EAAGoB,GAAW,CAAEC,MAAOA,EAAOC,SAAUA,EAAUC,SAAUA,GAC1F,C,kCC9BI,EAAsC,WAStC,OARA,EAAWtB,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,CACX,EACO,EAASU,MAAMC,KAAMP,UAChC,EACIiB,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUf,MAAMY,EAASC,GAAc,KAAKS,OAClE,GACJ,EACIM,EAA4C,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGzC,EAAG0C,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP7C,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,EAAI,EAAG8C,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEV,KAAMgB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOvC,IAAM,GAAI+B,EACvJ,SAASM,EAAK7C,GAAK,OAAO,SAAUgD,GAAK,OACzC,SAAcC,GACV,GAAIZ,EAAG,MAAM,IAAIa,UAAU,mCAC3B,KAAOX,IAAMA,EAAI,EAAGU,EAAG,KAAOT,EAAI,IAAKA,OACnC,GAAIH,EAAI,EAAGC,IAAMzC,EAAY,EAARoD,EAAG,GAASX,EAAU,OAAIW,EAAG,GAAKX,EAAS,SAAOzC,EAAIyC,EAAU,SAAMzC,EAAES,KAAKgC,GAAI,GAAKA,EAAET,SAAWhC,EAAIA,EAAES,KAAKgC,EAAGW,EAAG,KAAKhB,KAAM,OAAOpC,EAE3J,OADIyC,EAAI,EAAGzC,IAAGoD,EAAK,CAAS,EAARA,EAAG,GAAQpD,EAAE8B,QACzBsB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGpD,EAAIoD,EAAI,MACxB,KAAK,EAAc,OAAXT,EAAEC,QAAgB,CAAEd,MAAOsB,EAAG,GAAIhB,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIW,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKT,EAAEI,IAAIO,MAAOX,EAAEG,KAAKQ,MAAO,SACxC,QACI,MAAkBtD,GAAZA,EAAI2C,EAAEG,MAAYzC,OAAS,GAAKL,EAAEA,EAAEK,OAAS,KAAkB,IAAV+C,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAET,EAAI,EAAG,QAAU,CAC3G,GAAc,IAAVS,EAAG,MAAcpD,GAAMoD,EAAG,GAAKpD,EAAE,IAAMoD,EAAG,GAAKpD,EAAE,IAAM,CAAE2C,EAAEC,MAAQQ,EAAG,GAAI,KAAO,CACrF,GAAc,IAAVA,EAAG,IAAYT,EAAEC,MAAQ5C,EAAE,GAAI,CAAE2C,EAAEC,MAAQ5C,EAAE,GAAIA,EAAIoD,EAAI,KAAO,CACpE,GAAIpD,GAAK2C,EAAEC,MAAQ5C,EAAE,GAAI,CAAE2C,EAAEC,MAAQ5C,EAAE,GAAI2C,EAAEI,IAAIQ,KAAKH,GAAK,KAAO,CAC9DpD,EAAE,IAAI2C,EAAEI,IAAIO,MAChBX,EAAEG,KAAKQ,MAAO,SAEtBF,EAAKb,EAAK9B,KAAKa,EAASqB,EAC5B,CAAE,MAAOV,GAAKmB,EAAK,CAAC,EAAGnB,GAAIQ,EAAI,CAAG,CAAE,QAAUD,EAAIxC,EAAI,CAAG,CACzD,GAAY,EAARoD,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEtB,MAAOsB,EAAG,GAAKA,EAAG,QAAK,EAAQhB,MAAM,EAC9E,CAtBgDL,CAAK,CAAC5B,EAAGgD,GAAK,CAAG,CAuBrE,EAoBIK,GAAS,QAAc,CACvBC,KAAM,yBACNC,IAPM,SAAUC,GAAc,OAAOtC,OAAU,OAAQ,OAAQ,GAAQ,WACvE,OAAOiB,EAAY3B,MAAM,SAAU3B,GAC/B,MAAO,CAAC,EAAc0C,QAAQkC,IAAID,EAAWE,IAAIC,IACrD,GACJ,GAAI,IAKAC,GAAc,QAAe,CAC7BN,KAAM,iCACNC,IAAK,KAA4BF,SAGjCQ,GAAgB,QAAY,MAC5BC,GAAc,QAAQT,EAAOU,OAAQF,GAAe,SAAUG,EAAOC,GACrE,OAAQD,EAAME,MAAK,SAAUC,GAAQ,OAAOA,EAAKC,qBAAuBH,CAAI,KAAM,IACtF,IAEII,GAAgB,UAEhBC,GAAmB,SAAa,SAAUzF,GAC1C,IAAI2E,EAAa3E,EAAG2E,WAAY1C,EAAWjC,EAAGiC,SAC1CyD,EAAQf,EAAWgB,WAAU,SAAU3F,GACvC,IAAIuF,EAAqBvF,EAAGuF,mBAC5B,OAAOtD,EAASsD,qBAAuBA,CAC3C,IACA,IAAe,IAAXG,EACA,OAAOf,EAEX,IAAIiB,EA5C4C,SAAUC,EAAIC,EAAMC,GACpE,GAAIA,GAA6B,IAArB3E,UAAUC,OAAc,IAAK,IAA4B2E,EAAxB9E,EAAI,EAAG+E,EAAIH,EAAKzE,OAAYH,EAAI+E,EAAG/E,KACxE8E,GAAQ9E,KAAK4E,IACRE,IAAIA,EAAKE,MAAM3E,UAAU4E,MAAM1E,KAAKqE,EAAM,EAAG5E,IAClD8E,EAAG9E,GAAK4E,EAAK5E,IAGrB,OAAO2E,EAAGO,OAAOJ,GAAME,MAAM3E,UAAU4E,MAAM1E,KAAKqE,GACtD,CAoCiBO,CAAc,GAAI1B,GAAY,GAE3C,OADAiB,EAAOU,OAAOZ,EAAO,EAAGzD,GACjB2D,CACX,IAsCA,SAASd,EAAgB7C,GACrB,OAAOI,EAAUV,UAAM,OAAQ,GAAQ,WACnC,IAAI3B,EAAIuG,EAAWC,EAAaC,EAAcC,EAAcvE,EAAUwE,EAASzE,EAAOE,EACtF,OAAOkB,EAAY3B,MAAM,SAAUiF,GAC/B,OAAQA,EAAGhD,OACP,KAAK,EAAG,MAAO,CAAC,EAAaiD,EAAiB5E,IAC9C,KAAK,EAgBD,OAfAjC,EAAK4G,EAAG/C,OAAQ0C,EAAYvG,EAAG,GAAIwG,EAAcxG,EAAG,GAAIyG,EAAezG,EAAG,GAAI0G,EAAe1G,EAAG,GAChGmC,EAAWsE,EAAa5B,KAAI,SAAU9C,GAAU,ODjI7D,SAAsC/B,GAEzC,OAAOa,EAAS,CAAC,EADJb,EAAG+B,OAEpB,CC8H2E+E,CAA6B,CAAE/E,OAAQA,GAAW,IACzG4E,EAAUH,EAAY3B,KAAI,SAAU1B,GAChC,OD/HjB,SAA0CnD,GAC7C,IAAwB+B,EAAS/B,EAAG+B,OACpC,OAAOlB,EAASA,EAAS,CAAC,EADbb,EAAGmD,QACsB,CAAEpB,OAAQA,GACpD,CC4H+BgF,CAAiC,CACpC5D,OAAQA,EACRpB,OAAQI,EAASkD,MAAK,SAAUtD,GAAU,OAAOA,EAAOD,4BAA8BqB,EAAOrB,yBAA2B,KAEhI,IACAI,EAAQqE,EAAU1B,KAAI,SAAU9B,GAC5B,ODjIjB,SAAoC/C,GACvC,IAAoB2G,EAAU3G,EAAG2G,QACjC,OAAO9F,EAASA,EAAS,CAAC,EADfb,EAAG+C,MACsB,CAAE4D,QAASA,GACnD,CC8H+BK,CAA2B,CAC9BjE,KAAMA,EACN4D,QAASA,EAAQM,QAAO,SAAU9D,GAAU,OAAOA,EAAO+D,0BAA4BnE,EAAKmE,uBAAyB,KAE5H,IACA9E,EAAWsE,EAAavB,MAAMN,IAAIjD,GAC3B,CAAC,EAAcI,EAAuB,CACrCC,SAAUA,EACVC,MAAOA,EACPC,SAAUA,EACVC,SAAUA,KAG9B,GACJ,GACJ,CACA,SAASyE,EAAiB5E,GACtB,OAAOI,EAAUV,UAAM,OAAQ,GAAQ,WACnC,OAAO2B,EAAY3B,MAAM,SAAU3B,GAC/B,MAAO,CAAC,EAAc0C,QAAQkC,IAAI,CAC1B,KAAmBJ,OAAOvC,EAASsD,oBACnC,KAAyBf,OAAOvC,EAASsD,oBACzC,KAAqBf,OAAOvC,EAASsD,oBACrC,KAA4Bf,OAAO,CAAE2C,YAAalF,EAASsD,uBAEvE,GACJ,GACJ,CA/EAP,EAAcoC,GAAG5B,GAAe,SAAU7B,EAAGb,GAAS,OAAOA,CAAO,KAEpE,QAAO,CACHuE,MAAO,CAAC,KAAiB7C,OAAOpB,MAChCkE,OAAQ,KAAiB9C,OAAOU,OAChCqC,OAAQ/C,EAAOgD,YAEnB,QAAO,CACHH,MAAO7C,EAAOpB,KACd6D,OAAQ,SAAU9B,GAAS,QAASA,EAAM9D,MAAQ,EAClDoG,GAAI,SAAUtC,GAAS,OAAOA,EAAM,GAAGI,kBAAoB,EAC3DgC,OAAQ/B,KAGZ,QAAO,CACH6B,MAAOtC,EAAY3B,KACnBkE,OAAQ,CAAE3C,WAAYH,EAAOU,OAAQjD,SAAUgD,GAC/CwC,GAAI,SAAUzH,EAAIoC,GACd,IAAIuC,EAAa3E,EAAG2E,WAAY1C,EAAWjC,EAAGiC,SAC9C,MAAO,CACH0C,WAAYA,EACZ1C,SAAU,EAAS,EAAS,CAAC,EAAGA,GAAW,CAAEG,SAAUA,EAAS+C,MAAMN,IAAIjD,KAElF,EACA2F,OAAQ9B,KAEZ,QAAO,CACH4B,MAAO5B,EAAiBiC,SACxBH,OAAQ/C,EAAOU,SAGP,EAAS,EAAS,CAAC,EAAGV,GAAS,CAAEO,YAAaA,EAAaC,cAAeA,EAAeC,YAAaA,EAAaO,cAAeA,G,sHCzHnImC,EAAe,SAAU3H,GAChC,IAAIC,EAAYD,EAAGC,UAAWgC,EAAWjC,EAAGiC,SAExCzB,EAAY,IAAW,gBAAiBP,GAC5C,OAAQ,SAAK,KAAoB,CAAEA,UAAWO,EAAWH,gBAAgB,SAAK,KAAoB,CAAC,GAAIF,MAAO8B,EAASwC,KAAMrE,SAAU,oBAAqGG,iBAAiB,SAAK,KAAoB,CAAE0B,SAAUA,KACtS,ECXW2F,IDYmB,IAAAhH,MAAK+G,GCZT,IACfE,EAAoB,IACpBC,EAAqB,IACrBC,EAAkB,IAElBC,EAAyB,IACzBC,EAA0B,IAC1BC,EAAc,CACrBnG,OAAQ8F,EACR9E,KAAMgF,EACN,cAAeC,GAERG,EAAe,CACtBpG,OAAQ+F,EACR/E,KAV0B,IAW1B,cAAekF,G,kDCffpH,EAAsC,WAStC,OARAA,EAAWC,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,CACX,EACOH,EAASa,MAAMC,KAAMP,UAChC,EAMIgH,GAAS,QAAe,CACxB3D,KAAM,gCACNC,IAAK,KAAqB0D,SAE1BC,GAAQ,SAAY,GACpBC,GAAY,QAAY,MACxBC,GAAU,QAAQ,KAAiBC,UAAWF,GAAW,SAAUnG,EAAUiD,GAC7E,OAAOjD,EAASkD,MAAK,SAAUtD,GAAU,OAAOA,EAAOD,4BAA8BsD,CAAI,GAC7F,IACIqD,GAAQ,QAAY,IACpBC,GAAe,QAAY,IAC3BC,GAAS,QAAY,MACrBC,GAAa,QAAQH,EAAOC,EAAcC,GAAQ,SAAUlE,EAAMoE,EAAaC,GAAS,QAASrE,KAAUoE,KAAiBC,CAAO,IACnIC,GAAS,UACT,GAAS,UACTC,GAAc,UACdC,GAAqB,UACrBC,GAAe,UACf1B,GAAW,UACfa,EAAMjB,GAAG2B,GAAQ,WAAc,OAAO,CAAM,IAC5CV,EAAMjB,GAAG,GAAQ,WAAc,OAAO,CAAO,IAC7CiB,EAAMjB,GAAGgB,EAAOhF,MAAM,WAAc,OAAO,CAAO,IAClDkF,EAAUlB,GAAG2B,GAAQ,SAAUpF,EAAGyB,GAAM,OAAOA,CAAI,IACnDqD,EAAMrB,GAAG4B,GAAa,SAAUrF,EAAGb,GAAS,OAAOA,CAAO,IAC1D4F,EAAatB,GAAG6B,GAAoB,SAAUtF,EAAGb,GAAS,OAAOA,CAAO,IACxE6F,EAAOvB,GAAG8B,GAAc,SAAUvF,EAAGb,GAAS,OAAOA,CAAO,KAC5D,QAAO,CACHuE,MAAOkB,EAAQY,QACflC,OAAQ,SAAUlF,GAAU,OAAOqH,QAAQrH,EAAS,EACpDwF,QAAQ,EAAA8B,EAAA,GAAO,CACXC,QAAS,CACL7E,KAAMuE,EACNH,YAAaI,EACbM,gCAAiCL,QAI7C,QAAO,CACH7B,MAAOG,EACPF,OAAQ,CACJvF,OAAQwG,EACR9D,KAAMgE,EACNI,YAAaH,EACbI,MAAOH,GAEX1B,OAAQ2B,EACRnB,GAAI,SAAUzH,GACV,IAAI+B,EAAS/B,EAAG+B,OAAQ0C,EAAOzE,EAAGyE,KAAMoE,EAAc7I,EAAG6I,YAAaC,EAAQ9I,EAAG8I,MACjF,MAAO,CACHhH,0BAA2BC,EAAOD,0BAClC2C,KAAMA,EACNoE,YAAaA,EACbU,gCAAiCT,EACjCU,cAAezH,EAAOyH,cACtBC,6BAA8B1H,EAAO0H,6BAE7C,EACAlC,OAAQa,EAAOZ,YAEnB,QAAO,CACHH,MAAOe,EAAOhF,KACdqE,GAAI,SAAU1F,GAAU,OAAOA,EAAOwD,kBAAoB,EAC1DgC,OAAQ,KAAiBmC,UAAUvH,SAASqF,YAEhD,QAAO,CACHH,MAAOe,EAAOhF,KACdqE,GAAI,WAAc,MAAO,qBAAuB,EAChDF,OAAQ,KAASoC,cAEd,IAAIC,EAAoB/I,EAASA,EAAS,CAAC,EAAGuH,GAAS,CAAEC,MAAOA,EAAOI,MAAOA,EAAOC,aAAcA,EAAcC,OAAQA,EAAQC,WAAYA,EAAYG,OAAQA,EAAQc,OAAQ,EAAQb,YAAaA,EAAaC,mBAAoBA,EAAoBC,aAAcA,EAAc1B,SAAUA,I,kDC/C7RsC,GAAsB,IAAAlJ,OA7BJ,SAAUZ,GACnC,IAAIC,EAAYD,EAAGC,UAEf2G,GAAK,QAAQ,CAACgD,EAAkBvB,MAAOuB,EAAkBC,SAAUE,EAAOnD,EAAG,GAAIiD,EAASjD,EAAG,GAC7FoD,GAAK,QAAQ,CACbJ,EAAkBnB,MAClBmB,EAAkBlB,aAClBkB,EAAkBjB,SAClBlE,EAAOuF,EAAG,GAAInB,EAAcmB,EAAG,GAAIlB,EAAQkB,EAAG,GAC9CC,GAAK,QAAQ,CACbL,EAAkBZ,YAClBY,EAAkBX,mBAClBW,EAAkBV,eAClBF,EAAciB,EAAG,GAAIhB,EAAqBgB,EAAG,GAAIf,EAAee,EAAG,GACnEC,GAAK,QAAQ,CAACN,EAAkBpC,SAAUoC,EAAkBhB,aAAcpB,EAAW0C,EAAG,GAAIC,EAAYD,EAAG,GAC3GE,GAAK,QAAQ,CACb,KAA4B5F,OAAOU,OACnC,KAA4BV,OAAO+D,UACnC8B,EAASD,EAAG,GAAIrI,EAASqI,EAAG,GAE5B5J,EAAY,IAAW,oBAAqBP,GAChD,OAAQ,UAAMqK,EAAA,EAAO,CAAErK,UAAWO,EAAWuJ,KAAMA,EAAMQ,OAAQV,EAAQW,UAAU,EAAM/J,SAAU,EAAC,SAAK6J,EAAA,EAAMG,OAAQ,CAAEhK,UAAU,SAAK6J,EAAA,EAAMI,MAAO,CAAEjK,SAAU,8BAAyI,SAAK6J,EAAA,EAAMK,KAAM,CAAElK,UAAU,SAAK,KAAM,CAAEmK,SAAUpD,EAAU/G,UAAU,UAAMoK,EAAA,EAAK,CAAE5K,UAAW,aAAcQ,SAAU,EAAC,SAAKqK,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAKuK,MAAO,CAAEpH,MAAO,WAAoDd,MAAO2B,EAAMwG,SAAUjC,OAAmB,SAAK8B,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAKuK,MAAO,CAAEE,KAAM,WAAYtH,MAAO,WAAoDd,MAAO+F,EAAaoC,SAAUhC,OAA0B,SAAK6B,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAK0K,kBAAmB,CAAEd,OAAQA,EAAOxF,KAAI,SAAU7E,GACryB,IAAIoL,EAAYpL,EAAGoL,UACnB,MAAO,CACHtI,MAF4D9C,EAAGuJ,gCAG/DT,MAAOsC,EAEf,IAAIC,QAAmB,WAAVtJ,EAAqBe,MAAOgG,EAAOmC,SAAU/B,cAA8B,UAAMoB,EAAA,EAAMgB,OAAQ,CAAE7K,SAAU,EAAC,SAAK,KAAY,CAAE8K,UAAWpB,EAAWqB,QAAShE,EAAU/G,SAAU,eAA6D,SAAK,KAAY,CAAEgL,QAAS,YAAaD,QAAS3B,EAAQpJ,SAAU,iBACpW,ICjCWiL,EAAW,SAAU1L,GAC5B,IAAIC,EAAYD,EAAGC,UAAW0L,EAAQ3L,EAAG2L,MAAOC,EAAS5L,EAAG4L,OAAQzL,EAAQH,EAAGG,MAAOM,EAAWT,EAAGS,SAAUoL,EAAY7L,EAAG6L,UAAWC,EAAa9L,EAAG8L,WAAYN,EAAUxL,EAAGwL,QAE7KhL,EAAY,IAAW,YAAaP,GACpC8L,GAAQ,IAAAC,UAAQ,WAAc,MAAO,CACrCL,MAAOA,EACPC,OAAQA,EACR,GAAG,CAACA,EAAQD,IAChB,OAAQ,UAAM,MAAO,CAAE1L,UAAWO,EAAWuL,MAAOA,EAAOP,QAASA,EAAS/K,SAAU,EAAC,SAAK,MAAO,CAAER,UAAW,oBAAqBQ,SAAUN,IAAUM,GAAU,UAAM,MAAO,CAAER,UAAW,mBAAoBQ,SAAU,CAACoL,IAAa,SAAK,MAAO,CAAE5L,UAAW,mBAAoBQ,UAAU,IAAAwL,cAAaJ,KAAeC,IAAc,SAAK,MAAO,CAAE7L,UAAW,oBAAqBQ,UAAU,IAAAwL,cAAaH,UACpZ,EACWI,GAAe,IAAAtL,MAAK8K,G,SCHpBS,EAAa,SAAUnM,GAC9B,IAAIC,EAAYD,EAAGC,UAAWmM,EAAOpM,EAAGoM,KAAMC,EAASrM,EAAGqM,OAAQC,EAAUtM,EAAGsM,QAE3E1F,GAAK,QAAQ,CACb,KAA4BpC,OAAO+H,gBACnC,KAA4B/H,OAAO+D,UACnC8B,EAASzD,EAAG,GAAI4F,EAAe5F,EAAG,GAClCmC,GAAS,QAAQa,EAAkBb,QAEnCvI,EAAY,IAAW,cAAeP,GACtC8B,EAASqK,EAETK,GAAc,IAAAC,cAAY,WACrBN,GAGLrD,EAAOqD,EAAKtK,0BAChB,GAAG,CAACsK,EAAMrD,IACV,IAAKqD,EACD,OAAO,KAEX,IAAItD,EAAQ/G,EAAOwH,mCAAmCc,EAChDA,EAAOtI,EAAOwH,sCACdoD,EACN,OAAQ,UAAM,WAAW,CAAElM,SAAU,EAAC,SAAKyL,EAAc,CAAEjM,UAAWO,EAAWmL,MAAO9D,EAAmB+D,OAAQ9D,EAAoB3H,MAAO,SAAwC0L,UAAWQ,EAAOhL,OAASgL,EAAO,QAAKM,EAAWb,WAAYQ,EAAQjL,OAASiL,EAAQ,QAAKK,EAAWnB,QAASiB,EAAahM,UAAU,UAAM,MAAO,CAAER,UAAW,oBAAqBQ,SAAU,CAAkB,YAAjB+L,GAA8B,SAAK,IAAU,CAAEI,mBAAoB,wBAA4B,SAAK,MAAO,CAAE3M,UAAW,qBAAsB8L,MAAO,CAAEc,gBAAiB/D,QAAgB6D,MAAiB,SAAK,MAAO,CAAE1M,UAAW,oBAAqBQ,SAAUsB,EAAO0C,aAAgB,SAAKqF,EAAqB,CAAC,KAC9qB,ECpCI,IDqCwB,IAAAlJ,MAAKuL,GCrCS,WAStC,OARA,EAAWrL,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,CACX,EACO,EAASU,MAAMC,KAAMP,UAChC,GAMI,GAAS,QAAe,CACxBqD,KAAM,8BACNC,IAAK,KAAmB0D,SAExB,GAAQ,SAAY,GACpB0E,GAAU,QAAY,MACtBC,GAAQ,QAAQ,KAAiBC,OAAQF,GAAS,SAAU3K,EAAUiD,GACtE,OAAOjD,EAASkD,MAAK,SAAUtD,GAAU,OAAOA,EAAOmF,0BAA4B9B,CAAI,GAC3F,IACI,IAAQ,QAAY,IACpB,IAAe,QAAY,IAC3B,IAAa,QAAQ,GAAO,IAAc,SAAUX,EAAMoE,GAAe,QAASpE,KAAUoE,CAAa,IACzG,IAAS,UACT,IAAS,UACT,IAAc,UACd,IAAqB,UACrB,IAAW,UACf,EAAMzB,GAAG,IAAQ,WAAc,OAAO,CAAM,IAC5C,EAAMA,GAAG,IAAQ,WAAc,OAAO,CAAO,IAC7C,EAAMA,GAAG,EAAOhE,MAAM,WAAc,OAAO,CAAO,IAClD0J,EAAQ1F,GAAG,IAAQ,SAAUzD,EAAGyB,GAAM,OAAOA,CAAI,IACjD,GAAMgC,GAAG,IAAa,SAAUzD,EAAGb,GAAS,OAAOA,CAAO,IAC1D,GAAasE,GAAG,IAAoB,SAAUzD,EAAGb,GAAS,OAAOA,CAAO,KACxE,QAAO,CACHuE,MAAO0F,EAAM5D,QACblC,OAAQ,SAAUlF,GAAU,OAAOqH,QAAQrH,EAAS,EACpDwF,QAAQ,EAAA8B,EAAA,GAAO,CACXC,QAAS,CACL7E,KAAM,GACNoE,YAAa,SAIzB,QAAO,CACHxB,MAAO,GACPC,OAAQ,CACJvE,KAAMgK,EACNtI,KAAM,GACNoE,YAAa,IAEjB5B,OAAQ,GACRQ,GAAI,SAAUzH,GACV,IAAI+C,EAAO/C,EAAG+C,KAAM0B,EAAOzE,EAAGyE,KAAMoE,EAAc7I,EAAG6I,YACrD,MAAO,CACH3B,wBAAyBnE,EAAKmE,wBAC9BzC,KAAMA,EACNoE,YAAaA,EACboE,QAASlK,EAAKkK,QAEtB,EACA1F,OAAQ,EAAOC,YAEnB,QAAO,CACHH,MAAO,EAAOjE,KACdqE,GAAI,SAAU1E,GAAQ,OAAOA,EAAKwC,kBAAoB,EACtDgC,OAAQ,KAAiBmC,UAAUxH,MAAMsF,YAE7C,QAAO,CACHH,MAAO,EAAOjE,KACdqE,GAAI,WAAc,MAAO,qBAAuB,EAChDF,OAAQ,KAASoC,cAEd,IAAIuD,GAAkB,EAAS,EAAS,CAAC,EAAG,GAAS,CAAE7E,MAAO,EAAOI,MAAO,GAAOC,aAAc,GAAcE,WAAY,GAAYG,OAAQ,GAAQc,OAAQ,GAAQb,YAAa,GAAaC,mBAAoB,GAAoBzB,SAAU,KCxD/O2F,IAAoB,IAAAvM,OAdJ,SAAUZ,GACjC,IAAIC,EAAYD,EAAGC,UAEf2G,GAAK,QAAQ,CAACsG,GAAgB7E,MAAO6E,GAAgBrD,SAAUE,EAAOnD,EAAG,GAAIiD,EAASjD,EAAG,GACzFoD,GAAK,QAAQ,CAACkD,GAAgBzE,MAAOyE,GAAgBxE,eAAgBjE,EAAOuF,EAAG,GAAInB,EAAcmB,EAAG,GACpGC,GAAK,QAAQ,CACbiD,GAAgBlE,YAChBkE,GAAgBjE,qBAChBD,EAAciB,EAAG,GAAIhB,EAAqBgB,EAAG,GAC7CC,GAAK,QAAQ,CAACgD,GAAgB1F,SAAU0F,GAAgBtE,aAAcpB,EAAW0C,EAAG,GAAIC,EAAYD,EAAG,GAEvG1J,EAAY,IAAW,oBAAqBP,GAChD,OAAQ,UAAMqK,EAAA,EAAO,CAAErK,UAAWO,EAAWuJ,KAAMA,EAAMQ,OAAQV,EAAQW,UAAU,EAAM/J,SAAU,EAAC,SAAK6J,EAAA,EAAMG,OAAQ,CAAEhK,UAAU,SAAK6J,EAAA,EAAMI,MAAO,CAAEjK,SAAU,2BAAuH,SAAK6J,EAAA,EAAMK,KAAM,CAAElK,UAAU,SAAK,KAAM,CAAEmK,SAAUpD,EAAU/G,UAAU,UAAMoK,EAAA,EAAK,CAAE5K,UAAW,aAAcQ,SAAU,EAAC,SAAKqK,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAKuK,MAAO,CAAEpH,MAAO,WAAoDd,MAAO2B,EAAMwG,SAAUjC,OAAmB,SAAK8B,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAKuK,MAAO,CAAEE,KAAM,WAAYtH,MAAO,WAAoDd,MAAO+F,EAAaoC,SAAUhC,cAAoC,UAAMqB,EAAA,EAAMgB,OAAQ,CAAE7K,SAAU,EAAC,SAAK,KAAY,CAAE8K,UAAWpB,EAAWqB,QAAShE,EAAU/G,SAAU,eAA6D,SAAK,KAAY,CAAEgL,QAAS,YAAaD,QAAS3B,EAAQpJ,SAAU,iBACn9B,ICZW2M,GAAW,SAAUpN,GAC5B,IAAIC,EAAYD,EAAGC,UAAWmM,EAAOpM,EAAGoM,KAAMC,EAASrM,EAAGqM,OAAQC,EAAUtM,EAAGsM,QAE3EvD,GAAS,QAAQmE,GAAgBnE,QAEjCvI,EAAY,IAAW,YAAaP,GACpC8C,EAAOqJ,EAEPK,GAAc,IAAAC,cAAY,WACrBN,GAGLrD,EAAOqD,EAAKlF,wBAChB,GAAG,CAACkF,EAAMrD,IACV,OAAKqD,GAGG,UAAM,WAAW,CAAE3L,SAAU,EAAC,SAAKyL,EAAc,CAAEjM,UAAWO,EAAWmL,MAAO5D,EAAiB6D,OPtB/E,IOsByGzL,MAAO,MAAsB0L,UAAWQ,EAAOhL,OAASgL,EAAO,QAAKM,EAAWb,WAAYQ,EAAQjL,OAASiL,EAAQ,QAAKK,EAAWnB,QAASiB,EAAahM,UAAU,SAAK,MAAO,CAAER,UAAW,kBAAmBQ,UAAU,SAAK,MAAO,CAAER,UAAW,kBAAmBQ,SAAUsC,EAAK0B,YAAe,SAAK0I,GAAmB,CAAC,MAFrb,IAGf,EC3BI,KD4BsB,IAAAvM,MAAKwM,IC5BW,WAStC,OARA,GAAWtM,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,CACX,EACO,GAASU,MAAMC,KAAMP,UAChC,GAMI,IAAS,QAAe,CACxBqD,KAAM,qCACNC,IAAK,KAAyB0D,SAE9B,IAAQ,SAAY,GACpBiF,IAAgB,QAAY,MAC5BC,IAAc,QAAQ,KAAiBC,aAAcF,IAAe,SAAUlL,EAAUiD,GACxF,OAAOjD,EAASkD,MAAK,SAAUtD,GAAU,OAAOA,EAAOyL,iCAAmCpI,CAAI,GAClG,IACI,IAAQ,QAAY,IACpB,IAAe,QAAY,IAC3B,IAAa,QAAQ,GAAO,IAAc,SAAUX,EAAMoE,GAAe,QAASpE,KAAUoE,CAAa,IACzG,IAAS,UACT,IAAS,UACT,IAAc,UACd,IAAqB,UACrB,IAAW,UACf,GAAMzB,GAAG,IAAQ,WAAc,OAAO,CAAM,IAC5C,GAAMA,GAAG,IAAQ,WAAc,OAAO,CAAO,IAC7C,GAAMA,GAAG,GAAOhE,MAAM,WAAc,OAAO,CAAO,IAClDiK,GAAcjG,GAAG,IAAQ,SAAUzD,EAAGyB,GAAM,OAAOA,CAAI,IACvD,GAAMgC,GAAG,IAAa,SAAUzD,EAAGb,GAAS,OAAOA,CAAO,IAC1D,GAAasE,GAAG,IAAoB,SAAUzD,EAAGb,GAAS,OAAOA,CAAO,KACxE,QAAO,CACHuE,MAAOiG,GAAYnE,QACnBlC,OAAQ,SAAUwG,GAAc,OAAOrE,QAAQqE,EAAa,EAC5DlG,QAAQ,EAAA8B,EAAA,GAAO,CACXC,QAAS,CACLoE,YAAa,GACbC,mBAAoB,SAIhC,QAAO,CACHtG,MAAO,GACPC,OAAQ,CACJmG,WAAYH,GACZ7I,KAAM,GACNoE,YAAa,IAEjB5B,OAAQ,GACRQ,GAAI,SAAUzH,GACV,IAAIyN,EAAazN,EAAGyN,WAAYhJ,EAAOzE,EAAGyE,KAAMoE,EAAc7I,EAAG6I,YACjE,MAAO,CACH3B,wBAAyBuG,EAAWvG,wBACpCpF,0BAA2B2L,EAAW3L,0BACtC0L,+BAAgCC,EAAWD,+BAC3CE,YAAajJ,EACbkJ,mBAAoB9E,EAE5B,EACAtB,OAAQ,GAAOC,YAEnB,QAAO,CACHH,MAAO,GAAOjE,KACdkE,OAAQ,KAAiBsG,UACzBnG,GAAI,SAAUxF,GAAY,OAAOA,EAASsD,kBAAoB,EAC9DgC,OAAQ,KAAiBmC,UAAUmE,YAAYrG,YAEnD,QAAO,CACHH,MAAO,GAAOjE,KACdqE,GAAI,WAAc,MAAO,qBAAuB,EAChDF,OAAQ,KAASoC,cAEd,IAAImE,GAAwB,GAAS,GAAS,CAAC,EAAG,IAAS,CAAEzF,MAAO,GAAOI,MAAO,GAAOC,aAAc,GAAcE,WAAY,GAAYG,OAAQ,GAAQc,OAAQ,GAAQb,YAAa,GAAaC,mBAAoB,GAAoBzB,SAAU,KCpDrPuG,IAA0B,IAAAnN,OApBJ,SAAUZ,GACvC,IAAIC,EAAYD,EAAGC,UAEf2G,GAAK,QAAQ,CAACkH,GAAsBzF,MAAOyF,GAAsBjE,SAAUE,EAAOnD,EAAG,GAAIiD,EAASjD,EAAG,GACrGoD,GAAK,QAAQ,CACb8D,GAAsBrF,MACtBqF,GAAsBpF,eACtBjE,EAAOuF,EAAG,GAAInB,EAAcmB,EAAG,GAC/BC,GAAK,QAAQ,CACb6D,GAAsB9E,YACtB8E,GAAsB7E,qBACtBD,EAAciB,EAAG,GAAIhB,EAAqBgB,EAAG,GAC7CC,GAAK,QAAQ,CACb4D,GAAsBtG,SACtBsG,GAAsBlF,aACtBpB,EAAW0C,EAAG,GAAIC,EAAYD,EAAG,GAEjC1J,EAAY,IAAW,yBAA0BP,GACrD,OAAQ,UAAMqK,EAAA,EAAO,CAAErK,UAAWO,EAAWuJ,KAAMA,EAAMQ,OAAQV,EAAQW,UAAU,EAAM/J,SAAU,EAAC,SAAK6J,EAAA,EAAMG,OAAQ,CAAEhK,UAAU,SAAK6J,EAAA,EAAMI,MAAO,CAAEjK,SAAU,iCAA2J,SAAK6J,EAAA,EAAMK,KAAM,CAAElK,UAAU,SAAK,KAAM,CAAEmK,SAAUpD,EAAU/G,UAAU,UAAMoK,EAAA,EAAK,CAAE5K,UAAW,aAAcQ,SAAU,EAAC,SAAKqK,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAKuK,MAAO,CAAEpH,MAAO,WAAoDd,MAAO2B,EAAMwG,SAAUjC,OAAmB,SAAK8B,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAKuK,MAAO,CAAEE,KAAM,WAAYtH,MAAO,WAAoDd,MAAO+F,EAAaoC,SAAUhC,cAAoC,UAAMqB,EAAA,EAAMgB,OAAQ,CAAE7K,SAAU,EAAC,SAAK,KAAY,CAAE8K,UAAWpB,EAAWqB,QAAShE,EAAU/G,SAAU,eAA6D,SAAK,KAAY,CAAEgL,QAAS,YAAaD,QAAS3B,EAAQpJ,SAAU,iBACv/B,IClBWuN,GAAiB,SAAUhO,GAClC,IAAIC,EAAYD,EAAGC,UAAWmM,EAAOpM,EAAGoM,KAAMC,EAASrM,EAAGqM,OAAQC,EAAUtM,EAAGsM,QAE3EvD,GAAS,QAAQ+E,GAAsB/E,QAEvCvI,EAAY,IAAW,mBAAoBP,GAC3CwN,EAAarB,EAEbK,GAAc,IAAAC,cAAY,WACrBN,GAGLrD,EAAOqD,EAAKoB,+BAChB,GAAG,CAACpB,EAAMrD,IACV,OAAKqD,GAGG,UAAM,WAAW,CAAE3L,SAAU,EAAC,SAAKyL,EAAc,CAAEjM,UAAWO,EAAWmL,MAAO3D,EAAwB4D,OAAQ3D,EAAyB9H,MAAO,YAA0D0L,UAAWQ,EAAOhL,OAASgL,EAAO,QAAKM,EAAWb,WAAYQ,EAAQjL,OAASiL,EAAQ,QAAKK,EAAWnB,QAASiB,EAAahM,UAAU,SAAK,MAAO,CAAER,UAAW,yBAA0BQ,UAAU,SAAK,MAAO,CAAER,UAAW,yBAA0BQ,SAAUgN,EAAWC,mBAAsB,SAAKK,GAAyB,CAAC,MAFxgB,IAGf,EC3BI1H,KD4B4B,IAAAzF,MAAKoN,IC5Be,SAAUnI,EAAIC,EAAMC,GACpE,GAAIA,GAA6B,IAArB3E,UAAUC,OAAc,IAAK,IAA4B2E,EAAxB9E,EAAI,EAAG+E,EAAIH,EAAKzE,OAAYH,EAAI+E,EAAG/E,KACxE8E,GAAQ9E,KAAK4E,IACRE,IAAIA,EAAKE,MAAM3E,UAAU4E,MAAM1E,KAAKqE,EAAM,EAAG5E,IAClD8E,EAAG9E,GAAK4E,EAAK5E,IAGrB,OAAO2E,EAAGO,OAAOJ,GAAME,MAAM3E,UAAU4E,MAAM1E,KAAKqE,GACtD,GAGO,SAASmI,GAAkBlM,EAAQmM,EAAaC,EAAQC,EAAUC,QACpD,IAAbD,IAAuBA,GAAW,QACpB,IAAdC,IAAwBA,GAAY,GACxC,IAAIjJ,EAAK,UAAUgB,OAAOrE,EAAOD,2BACjC,MAAO,CACHsD,GAAIA,EACJkJ,aAAa,EACblC,KAAMrK,EACNmM,YAAaA,EACbC,OAAQA,EACR9B,OAAQ+B,EAAW,CAAC,CAAEhJ,GAAI,SAASgB,OAAOhB,GAAKmJ,UAAW,cAAY5B,EACtEL,QAAS+B,EAAY,CAAC,CAAEjJ,GAAI,UAAUgB,OAAOhB,GAAKmJ,UAAW,eAAa5B,EAC1E6B,cAAe,SAEvB,CACO,SAASC,GAAgB1L,EAAMmL,EAAaC,EAAQC,EAAUC,QAChD,IAAbD,IAAuBA,GAAW,QACpB,IAAdC,IAAwBA,GAAY,GACxC,IAAIjJ,EAAK,QAAQgB,OAAOrD,EAAKmE,yBAC7B,MAAO,CACH9B,GAAIA,EACJkJ,aAAa,EACblC,KAAMrJ,EACNmL,YAAaA,EACbC,OAAQA,EACR9B,OAAQ+B,EAAW,CAAC,CAAEhJ,GAAI,SAASgB,OAAOhB,GAAKmJ,UAAW,cAAY5B,EACtEL,QAAS+B,EAAY,CAAC,CAAEjJ,GAAI,UAAUgB,OAAOhB,GAAKmJ,UAAW,eAAa5B,EAC1E6B,cAAe,OAEvB,CACO,SAASE,GAAsBjB,EAAYS,EAAaC,EAAQC,EAAUC,QAC5D,IAAbD,IAAuBA,GAAW,QACpB,IAAdC,IAAwBA,GAAY,GACxC,IAAIjJ,EAAK,eAAegB,OAAOqH,EAAWD,gCAC1C,MAAO,CACHpI,GAAIA,EACJkJ,aAAa,EACblC,KAAMqB,EACNS,YAAaA,EACbC,OAAQA,EACR9B,OAAQ+B,EAAW,CAAC,CAAEhJ,GAAI,SAASgB,OAAOhB,GAAKmJ,UAAW,cAAY5B,EACtEL,QAAS+B,EAAY,CAAC,CAAEjJ,GAAI,UAAUgB,OAAOhB,GAAKmJ,UAAW,eAAa5B,EAC1E6B,cAAe,cAEvB,CAEA,SAASG,GAAkB5M,EAAQG,EAAO2L,EAAa1L,EAAU+L,EAAa/B,EAAYiB,EAAUY,EAAgBI,QAC/F,IAAbA,IAAuBA,GAAW,GACtC,IAAIQ,EAAIV,EAAY,GAAIzK,EAAIyK,EAAY,GACpCzN,EAAWsB,EAAO0H,6BAChB,CACEoF,GAAgB3M,EAAMmD,MAAK,SAAUtC,GAAQ,OAAOA,EAAKmE,0BAA4BnF,EAAO0H,4BAA8B,IAAIvH,EAAO2L,EAAa1L,EAAU,CAACyM,EAAIhH,EAAeC,EAAmBpE,GAAI0I,EAAYiB,EAAUY,GAAgB,IAE/O,GACN,MAAO,CACHvJ,KAAM,UAAU2B,OAAOrE,EAAOD,2BAC9BoJ,KAAM,SACN4D,KAAMb,GAAkBlM,EAAQmM,EAAa/B,EAAYiC,EAAUhF,QAAQ3I,EAASY,SACpFZ,SAAUA,EACVyN,YAAaA,EAErB,CACA,SAASW,GAAgB9L,EAAMb,EAAO2L,EAAa1L,EAAU+L,EAAa/B,EAAYiB,EAAUY,EAAgBI,QAC3F,IAAbA,IAAuBA,GAAW,GACtC,IAAIQ,EAAIV,EAAY,GAAIzK,EAAIyK,EAAY,GACpCzN,EAAWoN,EACV5G,QAAO,SAAU9D,GAAU,OAAOA,EAAO+D,0BAA4BnE,EAAKmE,uBAAyB,IACnGrC,KAAI,SAAU4I,EAAY/H,GAC3B,OAUR,SAA+B+H,EAAYvL,EAAO2L,EAAa1L,EAAU+L,EAAa/B,EAAYiB,EAAUY,EAAgBI,QACvG,IAAbA,IAAuBA,GAAW,GACtC,IAAIQ,EAAIV,EAAY,GAAIzK,EAAIyK,EAAY,GACxC,MAAO,CACHzJ,KAAM,eAAe2B,OAAOqH,EAAWD,gCACvCtC,KAAM,cACN4D,KAAMJ,GAAsBjB,EAAYS,EAAaF,EAAgBI,GAAU,GAC/E3N,SAAU,CACNkO,GAAkBxM,EAASkD,MAAK,SAAUtD,GAAU,OAAOA,EAAOD,4BAA8B2L,EAAW3L,yBAA2B,IAAII,EAAO2L,EAAa1L,EAAU,CAACyM,EAAIhH,EAAeI,EAAwBvE,GAAI0I,EAAYiB,EAAUY,GAAgB,IAElQE,YAAaA,EAErB,CAtBea,CAAsBtB,EAAYvL,EAAO2L,EAAa1L,EAAU,CAACyM,EAAIhH,EAAeG,EAAiBtE,EAAIiC,GAASkC,EAAeK,IAA2BkE,EAAYiB,EAAUY,GAAgB,EAC7M,IACA,MAAO,CACHvJ,KAAM,QAAQ2B,OAAOrD,EAAKmE,yBAC1BgE,KAAM,OACN4D,KAAML,GAAgB1L,EAAMmL,EAAad,EAAUgB,EAAUhF,QAAQ3I,EAASY,SAC9EZ,SAAUA,EACVyN,YAAaA,EAErB,CAiBO,SAASc,GAAiBC,GAC7B,OAAO5I,GAAc,CAAC4I,EAAUH,MAAOG,EAAUxO,SAASyO,SAAQ,SAAUC,GAAS,OAAOH,GAAiBG,EAAQ,KAAI,EAC7H,CACO,SAASC,GAAiBH,GAC7B,IAAII,EAAQJ,EAAUxO,SAASoE,KAAI,SAAUsK,GAAS,MAAO,CACzDG,MAAO,UAAUlJ,OAAO6I,EAAUxK,MAClC8K,OAAQ,SAASnJ,OAAO+I,EAAM1K,MAC9B,IACJ,OAAO4B,GAAcA,GAAc,GAAIgJ,GAAO,GAAOJ,EAAUxO,SAASyO,SAAQ,SAAUC,GAAS,OAAOC,GAAiBD,EAAQ,KAAI,EAC3I,C,eC3GWK,GAAqB,WAE5B,IAAIxP,GAAK,QAAQ,CACb,KAAiBgN,OACjB,KAAiBO,aACjB,KAAiB/E,YACjBtG,EAAQlC,EAAG,GAAI6N,EAAc7N,EAAG,GAAImC,EAAWnC,EAAG,GACtDyP,QAAQC,IAAI,6BAA8BvN,GAC1C,IAMIkJ,GANkB,QAAQ,CAC1B,KAAiBsE,aACjB,KAAiBC,mBACjB,KAAiBC,kBAGSC,MAAK,SAAU/N,GAAU,MAAkB,YAAXA,CAAsB,IAEhFkN,GAAY,IAAAjD,UAAQ,WACpB,OAAIX,EACO,KD6EW,SAAU0E,EAAe7N,EAAO2L,EAAa1L,EAAUgK,EAAYiB,EAAUY,GACvG,OAAOW,GAAkBoB,EAAe7N,EAAO2L,EAAa1L,EAAU,CAACyF,EAAcA,GAAeuE,EAAYiB,EAAUY,EAC9H,CC7EegC,CAAiB7N,EAAS,GAAID,EAAO2L,EAAa1L,EAAUgK,EAAYiB,GAAUY,GAC7F,GAAG,CAAC3C,EAASlJ,EAAU0L,EAAa3L,IAChC+N,GAAQ,IAAAjE,UAAQ,WAAc,OAAQiD,EAAYD,GAAiBC,GAAa,EAAK,GAAG,CAACA,IACzFI,GAAQ,IAAArD,UAAQ,WAAc,OAAQiD,EAAYG,GAAiBH,GAAa,EAAK,GAAG,CAACA,IACzFrI,GAAK,IAAAoF,UAAQ,WACb,IAAIkE,EAAW,EACXC,EAAY,EAKhB,OAJAF,EAAMG,SAAQ,SAAUtB,GACpBoB,EAAWG,KAAKC,IAAIJ,EAAUpB,EAAKZ,YAAY,GAAKtG,EAAeM,EAAY4G,EAAKN,gBACpF2B,EAAYE,KAAKC,IAAIH,EAAWrB,EAAKZ,YAAY,GAAKtG,EAAeO,EAAa2G,EAAKN,eAC3F,IACO,CAAC0B,EAAUC,EACtB,GAAG,CAACF,IAASC,EAAWtJ,EAAG,GAAIuJ,EAAYvJ,EAAG,GAC1C2J,GAAc,IAAAvE,UAGlB,WAAc,OAAQX,GAAU,SAAa,CAAE4E,MAAO,GAAIZ,MAAO,MAAQ,SAAa,CAAEY,MAAOA,EAAOZ,MAAOA,GAAW,GAAG,CAACA,EAAOY,EAAO5E,IACtIrB,GAAK,SAAUuG,GAAcC,EAASxG,EAAG,GAAIiB,EAAWjB,EAAG,GAAGiB,SAIlE,OAHA,IAAAwF,YAAU,WACNxF,EAASsF,EACb,GAAG,CAACA,EAAatF,IACV,CACHuF,OAAQA,EACRnF,QAASA,EACT6E,SAAUA,EACVQ,WAAYrB,EAAMhO,OAClB8O,UAAWA,EAEnB,EC9CIQ,IAAgB,SAAa,CAC7BV,MAAO,CACH,CACI7K,GAAI,SACJwL,QAAS,SACTtC,aAAa,EACbH,OAAQ,WAAc,OAAQ,SAAKzC,EAAU,CAAEvL,OAAO,SAAK,IAAU,CAAC,GAAIwL,MAAO9D,EAAmB+D,OAAQ9D,EAAoBrH,UAAU,SAAK,IAAU,CAAEmM,mBAAoB,sBAAuB3M,UAAW,sBAAuB0L,MAAO,MAAW,EAC1PuC,YAAa,CAACtG,EAAcA,IAEhC,CACIxC,GAAI,SACJwL,QAAS,SACTtC,aAAa,EACbH,OAAQ,WAAc,OAAQ,SAAKzC,EAAU,CAAEvL,OAAO,SAAK,IAAU,CAAC,GAAIwL,MAAO5D,EAAiB6D,OblBhF,IakB0GnL,UAAU,SAAK,IAAU,CAAEmM,mBAAoB,sBAAuB3M,UAAW,sBAAuB0L,MAAO,OAAY,EACvPuC,YAAa,CAAgB,EAAftG,EAAmBC,EAAmBD,IAExD,CACIxC,GAAI,SACJwL,QAAS,SACTtC,aAAa,EACbH,OAAQ,WAAc,OAAQ,SAAKzC,EAAU,CAAEvL,OAAO,SAAK,IAAU,CAAC,GAAIwL,MAAO3D,EAAwB4D,OAAQ3D,EAAyBxH,UAAU,SAAK,IAAU,CAAEmM,mBAAoB,sBAAuB3M,UAAW,sBAAuB0L,MAAO,OAAY,EACrQuC,YAAa,CAAgB,EAAftG,EAAmBC,EAAoBE,EAAiBH,OAI9EmE,GAAQ,CACR,mBAAoB,GAAG3F,OAAsB,EAAfwB,EAAmBE,EAAoB,OAU9D+I,IAA0B,IAAAjQ,OARR,SAAUZ,GACnC,IAAIC,EAAYD,EAAGC,UAEfuQ,GAAS,SAAUG,IAAe,GAElCnQ,EAAY,IAAW,mBAAoB,6BAA8BP,GAC7E,OAAQ,SAAK,MAAO,CAAEA,UAAWO,EAAWuL,MAAOA,GAAOtL,UAAU,SAAK,MAAS,CAAE+P,OAAQA,KAChG,ICnBWM,IAAsB,IAAAlQ,OAjBJ,SAAUZ,GACnC,IAAIC,EAAYD,EAAGC,UAEf2G,EAAK4I,KAAsBgB,EAAS5J,EAAG4J,OAAQE,EAAa9J,EAAG8J,WAAYrF,EAAUzE,EAAGyE,QAAS6E,EAAWtJ,EAAGsJ,SAAUC,EAAYvJ,EAAGuJ,UAExI3P,EAAY,IAAW,mBAAoBP,GAC3C8L,GAAQ,IAAAC,UAAQ,WAChB,MAAO,CACH,kBAAmB,GAAG5F,OAAO8J,EAAU,MACvC,mBAAoB,GAAG9J,OAAO+J,EAAW,MAEjD,GAAG,CAACA,EAAWD,IACf,OAAI7E,GACO,SAAKwF,GAAyB,CAAE5Q,UAAWO,KAE9C,SAAK,MAAO,CAAEP,UAAWO,EAAWuL,MAAOA,EAAOtL,UAAU,SAAK,MAAS,CAAE+P,OAAQA,GAAUE,IAC1G,I,WCIWK,IAAuB,IAAAnQ,OAnBJ,SAAUZ,GACpC,IAAIC,EAAYD,EAAGC,UAEf2G,GAAK,QAAQ,CAAC,KAAoB6B,MAAO,KAAoBC,eAAgBjE,EAAOmC,EAAG,GAAIiC,EAAcjC,EAAG,GAC5GoD,GAAK,QAAQ,CACb,KAAoBhB,YACpB,KAAoBC,qBACpBD,EAAcgB,EAAG,GAAIf,EAAqBe,EAAG,GAC7CC,GAAK,QAAQ,CACb,KAAoBzC,SACpB,KAAoBoB,aACpBpB,EAAWyC,EAAG,GAAIE,EAAYF,EAAG,GAEjCzJ,EAAY,IAAW,qBAAsBP,GACjD,OAAQ,SAAK,KAAW+Q,MAAO,CAAEC,OAAQ,CACjC9Q,MAAO,YACPC,SAAU,sCACXH,UAAWO,EAAWC,UAAU,SAAK,KAAM,CAAEyQ,gBAAiB,6BAA8BC,QAAQ,UAAM,WAAW,CAAE1Q,SAAU,EAAC,SAAK,KAAY,CAAE8K,UAAWpB,EAAWqB,QAAShE,EAAU/G,SAAU,eAA6D,SAAK,KAAyB,CAAC,MAAQmK,SAAUpD,EAAU/G,UAAU,UAAMoK,EAAA,EAAK,CAAE5K,UAAW,aAAcQ,SAAU,EAAC,SAAKqK,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAA0B,CAAC,MAAO,SAAKqK,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAKuK,MAAO,CAAEoG,KAAM,KAAMxN,MAAO,qBAA2Gd,MAAO2B,EAAMwG,SAAUjC,OAAmB,SAAK8B,EAAA,EAAK,CAAEC,GAAI,GAAItK,UAAU,SAAK,KAAKuK,MAAO,CAAEE,KAAM,WAAYkG,KAAM,KAAMxN,MAAO,WAAoDd,MAAO+F,EAAaoC,SAAUhC,YAC50B,G","sources":["webpack://prm-all/./src/entities/strategy/strategy-item-layout/ui.tsx","webpack://prm-all/./src/shared/domain/strategy/factories.ts","webpack://prm-all/./src/entities/strategy/model/strategy.ts","webpack://prm-all/./src/widgets/strategy/strategy-item/ui.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/consts.ts","webpack://prm-all/./src/widgets/strategy/strategy-diagram/modals/edit-status-modal/model.ts","webpack://prm-all/./src/widgets/strategy/strategy-diagram/modals/edit-status-modal/ui.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/nodes/base-node/ui.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/nodes/status-node/ui.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/modals/edit-step-modal/model.ts","webpack://prm-all/./src/widgets/strategy/strategy-diagram/modals/edit-step-modal/ui.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/nodes/step-node/ui.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/modals/edit-step-result-modal/model.ts","webpack://prm-all/./src/widgets/strategy/strategy-diagram/modals/edit-step-result-modal/ui.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/nodes/step-result-node/ui.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/utils.ts","webpack://prm-all/./src/widgets/strategy/strategy-diagram/hook.ts","webpack://prm-all/./src/widgets/strategy/strategy-diagram/skeleton.tsx","webpack://prm-all/./src/widgets/strategy/strategy-diagram/ui.tsx","webpack://prm-all/./src/widgets/strategy/edit-strategy-form/ui.tsx"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport './style.scss';\nimport DefaultStrategyImage from '@/shared/assets/images/default-strategy-image.png';\nimport classNames from 'classnames';\nimport { memo } from 'react';\nexport var StrategyItemLayout = function (_a) {\n    var className = _a.className, image = _a.image, title = _a.title, subtitle = _a.subtitle, likeButtonSlot = _a.likeButtonSlot, leftButtonSlot = _a.leftButtonSlot, rightButtonSlot = _a.rightButtonSlot;\n    // Variables\n    var ClassName = classNames('strategy-item-layout', className);\n    return (_jsxs(\"div\", { className: ClassName, children: [_jsx(\"div\", { className: \"strategy-item-layout__like-button\", children: likeButtonSlot }), _jsx(\"img\", { src: image || DefaultStrategyImage, className: \"strategy-item-layout__image\" }), _jsxs(\"div\", { className: \"strategy-item-layout__text\", children: [_jsx(\"div\", { className: \"strategy-item-layout__title\", children: title }), _jsx(\"div\", { className: \"strategy-item-layout__subtitle\", children: subtitle })] }), _jsxs(\"div\", { className: \"strategy-item-layout__buttons\", children: [_jsx(\"div\", { className: \"strategy-item-layout__left-button\", children: leftButtonSlot }), _jsx(\"div\", { className: \"strategy-item-layout__right-button\", children: rightButtonSlot })] })] }));\n};\nexport var MemoStrategyItemLayout = memo(StrategyItemLayout);\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexport function DCustomStrategyStatusFactory(_a) {\n    var status = _a.status;\n    return __assign({}, status);\n}\nexport function DCustomStrategyStepResultFactory(_a) {\n    var result = _a.result, status = _a.status;\n    return __assign(__assign({}, result), { status: status });\n}\nexport function DCustomStrategyStepFactory(_a) {\n    var step = _a.step, results = _a.results;\n    return __assign(__assign({}, step), { results: results });\n}\nexport function DCustomStrategyContactFactory(_a) {\n    var contact_id = _a.contact_id, custom_strategy_status_id = _a.custom_strategy_status_id;\n    return __assign(__assign({}, contact_id), { status: custom_strategy_status_id });\n}\nexport function DCustomStrategyFactory(_a) {\n    var strategy = _a.strategy, steps = _a.steps, statuses = _a.statuses, contacts = _a.contacts;\n    return __assign(__assign({}, strategy), { steps: steps, statuses: statuses, contacts: contacts });\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { contactCustomStrategyStatus, customStrategyStatus, customStrategyStep, customStrategyStepResult, } from '@/shared/api';\nimport { DCustomStrategyContactFactory, DCustomStrategyFactory, DCustomStrategyStatusFactory, DCustomStrategyStepFactory, DCustomStrategyStepResultFactory, } from '@/shared/domain';\nimport { $$customStrategy } from '@/shared/effector';\nimport { GetAllFactory, RequestFactory } from '@/shared/factories';\nimport { combine, createEffect, createEvent, createStore, sample } from 'effector';\nvar api = function (strategies) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        return [2 /*return*/, Promise.all(strategies.map(StrategyFactory))];\n    });\n}); };\nvar getAll = GetAllFactory({\n    name: 'DOMAIN_CUSTOM_STRATEGY',\n    api: api,\n});\nvar getContacts = RequestFactory({\n    name: 'DOMAIN_CUSTOM_STRATEGY_CONTACT',\n    api: contactCustomStrategyStatus.getAll,\n});\n//* Stores\nvar $activeItemId = createStore(null);\nvar $activeItem = combine(getAll.$items, $activeItemId, function (items, id) {\n    return (items.find(function (item) { return item.custom_strategy_id === id; }) || null);\n});\n//* Events\nvar activeChanged = createEvent();\n//* Effects\nvar strategyUpdateFx = createEffect(function (_a) {\n    var strategies = _a.strategies, strategy = _a.strategy;\n    var index = strategies.findIndex(function (_a) {\n        var custom_strategy_id = _a.custom_strategy_id;\n        return strategy.custom_strategy_id === custom_strategy_id;\n    });\n    if (index === -1) {\n        return strategies;\n    }\n    var cloned = __spreadArray([], strategies, true);\n    cloned.splice(index, 1, strategy);\n    return cloned;\n});\n//* Logic\n$activeItemId.on(activeChanged, function (_, value) { return value; });\n// Strategies\nsample({\n    clock: [$$customStrategy.getAll.done],\n    source: $$customStrategy.getAll.$items,\n    target: getAll.submited,\n});\nsample({\n    clock: getAll.done,\n    filter: function (items) { return !!items.length; },\n    fn: function (items) { return items[0].custom_strategy_id; },\n    target: activeChanged,\n});\n// Contacts\nsample({\n    clock: getContacts.done,\n    source: { strategies: getAll.$items, strategy: $activeItem },\n    fn: function (_a, contacts) {\n        var strategies = _a.strategies, strategy = _a.strategy;\n        return ({\n            strategies: strategies,\n            strategy: __assign(__assign({}, strategy), { contacts: contacts.items.map(DCustomStrategyContactFactory) }),\n        });\n    },\n    target: strategyUpdateFx,\n});\nsample({\n    clock: strategyUpdateFx.doneData,\n    target: getAll.$items,\n});\nexport var $$dCustomStrategy = {\n    getAll: __assign(__assign({}, getAll), { getContacts: getContacts, $activeItemId: $activeItemId, $activeItem: $activeItem, activeChanged: activeChanged }),\n};\n//* Получить все стратегии\n//* Для каждой получить все статусы, результаты и шаги\n//* Сгруппировать каждую по отдельности\nfunction StrategyFactory(strategy) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, stepsData, resultsData, statusesData, contactsData, statuses, results, steps, contacts;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4 /*yield*/, LoadStrategyData(strategy)];\n                case 1:\n                    _a = _b.sent(), stepsData = _a[0], resultsData = _a[1], statusesData = _a[2], contactsData = _a[3];\n                    statuses = statusesData.map(function (status) { return DCustomStrategyStatusFactory({ status: status }); });\n                    results = resultsData.map(function (result) {\n                        return DCustomStrategyStepResultFactory({\n                            result: result,\n                            status: statuses.find(function (status) { return status.custom_strategy_status_id === result.custom_strategy_status_id; }),\n                        });\n                    });\n                    steps = stepsData.map(function (step) {\n                        return DCustomStrategyStepFactory({\n                            step: step,\n                            results: results.filter(function (result) { return result.custom_strategy_step_id === step.custom_strategy_step_id; }),\n                        });\n                    });\n                    contacts = contactsData.items.map(DCustomStrategyContactFactory);\n                    return [2 /*return*/, DCustomStrategyFactory({\n                            strategy: strategy,\n                            steps: steps,\n                            statuses: statuses,\n                            contacts: contacts,\n                        })];\n            }\n        });\n    });\n}\nfunction LoadStrategyData(strategy) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, Promise.all([\n                    customStrategyStep.getAll(strategy.custom_strategy_id),\n                    customStrategyStepResult.getAll(strategy.custom_strategy_id),\n                    customStrategyStatus.getAll(strategy.custom_strategy_id),\n                    contactCustomStrategyStatus.getAll({ strategy_id: strategy.custom_strategy_id }),\n                ])];\n        });\n    });\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport './style.scss';\nimport { StrategyItemLayout } from '@/entities/strategy';\nimport { EditStrategyButton, LikeStrategyButton } from '@/features/strategy';\nimport classNames from 'classnames';\nimport { memo } from 'react';\nexport var StrategyItem = function (_a) {\n    var className = _a.className, strategy = _a.strategy;\n    // Variables\n    var ClassName = classNames('strategy-item', className);\n    return (_jsx(StrategyItemLayout, { className: ClassName, likeButtonSlot: _jsx(LikeStrategyButton, {}), title: strategy.name, subtitle: \"\\u0411\\u0430\\u0437\\u043E\\u0432\\u0430\\u044F \\u0441\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F\", rightButtonSlot: _jsx(EditStrategyButton, { strategy: strategy }) }));\n};\nexport var MemoStrategyItem = memo(StrategyItem);\n","export var NODE_SPACING = 40;\nexport var STATUS_NODE_WIDTH = 200;\nexport var STATUS_NODE_HEIGHT = 100;\nexport var STEP_NODE_WIDTH = 200;\nexport var STEP_NODE_HEIGHT = 100;\nexport var STEP_RESULT_NODE_WIDTH = 200;\nexport var STEP_RESULT_NODE_HEIGHT = 100;\nexport var NODE_WIDTHS = {\n    status: STATUS_NODE_WIDTH,\n    step: STEP_NODE_WIDTH,\n    'step-result': STEP_RESULT_NODE_WIDTH,\n};\nexport var NODE_HEIGHTS = {\n    status: STATUS_NODE_HEIGHT,\n    step: STEP_NODE_HEIGHT,\n    'step-result': STEP_RESULT_NODE_HEIGHT,\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { customStrategyStatus } from '@/shared/api';\nimport { $$activeStrategy, $$alerts } from '@/shared/effector';\nimport { RequestFactory } from '@/shared/factories';\nimport { combine, createEvent, createStore, sample } from 'effector';\nimport { spread } from 'patronum';\nvar update = RequestFactory({\n    name: 'UPDATE_CUSTOM_STRATEGY_STATUS',\n    api: customStrategyStatus.update,\n});\nvar $show = createStore(false);\nvar $statusId = createStore(null);\nvar $status = combine($$activeStrategy.$statuses, $statusId, function (statuses, id) {\n    return statuses.find(function (status) { return status.custom_strategy_status_id === id; });\n});\nvar $name = createStore('');\nvar $description = createStore('');\nvar $color = createStore(null);\nvar $canSubmit = combine($name, $description, $color, function (name, description, color) { return !!name && !!description && !!color; });\nvar opened = createEvent();\nvar closed = createEvent();\nvar nameChanged = createEvent();\nvar descriptionChanged = createEvent();\nvar colorChanged = createEvent();\nvar submited = createEvent();\n$show.on(opened, function () { return true; });\n$show.on(closed, function () { return false; });\n$show.on(update.done, function () { return false; });\n$statusId.on(opened, function (_, id) { return id; });\n$name.on(nameChanged, function (_, value) { return value; });\n$description.on(descriptionChanged, function (_, value) { return value; });\n$color.on(colorChanged, function (_, value) { return value; });\nsample({\n    clock: $status.updates,\n    filter: function (status) { return Boolean(status); },\n    target: spread({\n        targets: {\n            name: nameChanged,\n            description: descriptionChanged,\n            global_strategy_status_color_id: colorChanged,\n        },\n    }),\n});\nsample({\n    clock: submited,\n    source: {\n        status: $status,\n        name: $name,\n        description: $description,\n        color: $color,\n    },\n    filter: $canSubmit,\n    fn: function (_a) {\n        var status = _a.status, name = _a.name, description = _a.description, color = _a.color;\n        return ({\n            custom_strategy_status_id: status.custom_strategy_status_id,\n            name: name,\n            description: description,\n            global_strategy_status_color_id: color,\n            activity_flag: status.activity_flag,\n            custom_strategy_next_step_id: status.custom_strategy_next_step_id,\n        });\n    },\n    target: update.submited,\n});\nsample({\n    clock: update.done,\n    fn: function (status) { return status.custom_strategy_id; },\n    target: $$activeStrategy.requestes.statuses.submited,\n});\nsample({\n    clock: update.done,\n    fn: function () { return 'Изменения сохранены'; },\n    target: $$alerts.showSuccess,\n});\nexport var $$editStatusModal = __assign(__assign({}, update), { $show: $show, $name: $name, $description: $description, $color: $color, $canSubmit: $canSubmit, opened: opened, closed: closed, nameChanged: nameChanged, descriptionChanged: descriptionChanged, colorChanged: colorChanged, submited: submited });\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { $$editStatusModal } from './model';\nimport './style.scss';\nimport { Form, MemoButton } from '@/shared/components';\nimport { $$globalStrategyStatusColor } from '@/shared/effector';\nimport classNames from 'classnames';\nimport { useUnit } from 'effector-react';\nimport { memo } from 'react';\nimport { Col, Modal, Row } from 'react-bootstrap';\nexport var EditStatusModal = function (_a) {\n    var className = _a.className;\n    // Effector\n    var _b = useUnit([$$editStatusModal.$show, $$editStatusModal.closed]), show = _b[0], closed = _b[1];\n    var _c = useUnit([\n        $$editStatusModal.$name,\n        $$editStatusModal.$description,\n        $$editStatusModal.$color,\n    ]), name = _c[0], description = _c[1], color = _c[2];\n    var _d = useUnit([\n        $$editStatusModal.nameChanged,\n        $$editStatusModal.descriptionChanged,\n        $$editStatusModal.colorChanged,\n    ]), nameChanged = _d[0], descriptionChanged = _d[1], colorChanged = _d[2];\n    var _e = useUnit([$$editStatusModal.submited, $$editStatusModal.$canSubmit]), submited = _e[0], canSubmit = _e[1];\n    var _f = useUnit([\n        $$globalStrategyStatusColor.getAll.$items,\n        $$globalStrategyStatusColor.getAll.$status,\n    ]), colors = _f[0], status = _f[1];\n    // Variables\n    var ClassName = classNames('edit-status-modal', className);\n    return (_jsxs(Modal, { className: ClassName, show: show, onHide: closed, centered: true, children: [_jsx(Modal.Header, { children: _jsx(Modal.Title, { children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\\u0430\" }) }), _jsx(Modal.Body, { children: _jsx(Form, { onSubmit: submited, children: _jsxs(Row, { className: \"custom-row\", children: [_jsx(Col, { xs: 12, children: _jsx(Form.Input, { label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\", value: name, onChange: nameChanged }) }), _jsx(Col, { xs: 12, children: _jsx(Form.Input, { type: \"textarea\", label: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\", value: description, onChange: descriptionChanged }) }), _jsx(Col, { xs: 12, children: _jsx(Form.SimpleColorPicker, { colors: colors.map(function (_a) {\n                                        var color_HEX = _a.color_HEX, global_strategy_status_color_id = _a.global_strategy_status_color_id;\n                                        return ({\n                                            value: global_strategy_status_color_id,\n                                            color: color_HEX,\n                                        });\n                                    }), pending: status == 'pending', value: color, onChange: colorChanged }) })] }) }) }), _jsxs(Modal.Footer, { children: [_jsx(MemoButton, { disabled: !canSubmit, onClick: submited, children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\" }), _jsx(MemoButton, { variant: \"secondary\", onClick: closed, children: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\" })] })] }));\n};\nexport var MemoEditStatusModal = memo(EditStatusModal);\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport './style.scss';\nimport classNames from 'classnames';\nimport { cloneElement, memo, useMemo } from 'react';\nexport var BaseNode = function (_a) {\n    var className = _a.className, width = _a.width, height = _a.height, title = _a.title, children = _a.children, inputPort = _a.inputPort, outputPort = _a.outputPort, onClick = _a.onClick;\n    // Variables\n    var ClassName = classNames('base-node', className);\n    var style = useMemo(function () { return ({\n        width: width,\n        height: height,\n    }); }, [height, width]);\n    return (_jsxs(\"div\", { className: ClassName, style: style, onClick: onClick, children: [_jsx(\"div\", { className: \"base-node__header\", children: title }), children, _jsxs(\"div\", { className: \"base-node__ports\", children: [inputPort && _jsx(\"div\", { className: \"base-node__input\", children: cloneElement(inputPort) }), outputPort && _jsx(\"div\", { className: \"base-node__output\", children: cloneElement(outputPort) })] })] }));\n};\nexport var MemoBaseNode = memo(BaseNode);\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { STATUS_NODE_HEIGHT, STATUS_NODE_WIDTH } from '../../consts';\nimport { MemoEditStatusModal } from '../../modals';\nimport { $$editStatusModal } from '../../modals/edit-status-modal/model';\nimport { MemoBaseNode } from '../base-node';\nimport './style.scss';\nimport { $$globalStrategyStatusColor } from '@/shared/effector';\nimport classNames from 'classnames';\nimport { useUnit } from 'effector-react';\nimport { memo, useCallback } from 'react';\nimport Skeleton from 'react-loading-skeleton';\nexport var StatusNode = function (_a) {\n    var className = _a.className, data = _a.data, inputs = _a.inputs, outputs = _a.outputs;\n    // Effects\n    var _b = useUnit([\n        $$globalStrategyStatusColor.getAll.$dictionaryById,\n        $$globalStrategyStatusColor.getAll.$status,\n    ]), colors = _b[0], colorsStatus = _b[1];\n    var opened = useUnit($$editStatusModal.opened);\n    // Variables\n    var ClassName = classNames('status-node', className);\n    var status = data;\n    // Handlers\n    var handleClick = useCallback(function () {\n        if (!data) {\n            return;\n        }\n        opened(data.custom_strategy_status_id);\n    }, [data, opened]);\n    if (!data) {\n        return null;\n    }\n    var color = status.global_strategy_status_color_id in colors\n        ? colors[status.global_strategy_status_color_id]\n        : undefined;\n    return (_jsxs(_Fragment, { children: [_jsx(MemoBaseNode, { className: ClassName, width: STATUS_NODE_WIDTH, height: STATUS_NODE_HEIGHT, title: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\", inputPort: inputs.length ? inputs[0] : undefined, outputPort: outputs.length ? outputs[0] : undefined, onClick: handleClick, children: _jsxs(\"div\", { className: \"status-node__info\", children: [colorsStatus === 'pending' ? (_jsx(Skeleton, { containerClassName: \"status-node__color\" })) : (_jsx(\"div\", { className: \"status-node__color\", style: { backgroundColor: color ? color : undefined } })), _jsx(\"div\", { className: \"status-node__name\", children: status.name })] }) }), _jsx(MemoEditStatusModal, {})] }));\n};\nexport var MemoStatusNode = memo(StatusNode);\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { customStrategyStep } from '@/shared/api';\nimport { $$activeStrategy, $$alerts } from '@/shared/effector';\nimport { RequestFactory } from '@/shared/factories';\nimport { combine, createEvent, createStore, sample } from 'effector';\nimport { spread } from 'patronum';\nvar update = RequestFactory({\n    name: 'UPDATE_CUSTOM_STRATEGY_STEP',\n    api: customStrategyStep.update,\n});\nvar $show = createStore(false);\nvar $stepId = createStore(null);\nvar $step = combine($$activeStrategy.$steps, $stepId, function (statuses, id) {\n    return statuses.find(function (status) { return status.custom_strategy_step_id === id; });\n});\nvar $name = createStore('');\nvar $description = createStore('');\nvar $canSubmit = combine($name, $description, function (name, description) { return !!name && !!description; });\nvar opened = createEvent();\nvar closed = createEvent();\nvar nameChanged = createEvent();\nvar descriptionChanged = createEvent();\nvar submited = createEvent();\n$show.on(opened, function () { return true; });\n$show.on(closed, function () { return false; });\n$show.on(update.done, function () { return false; });\n$stepId.on(opened, function (_, id) { return id; });\n$name.on(nameChanged, function (_, value) { return value; });\n$description.on(descriptionChanged, function (_, value) { return value; });\nsample({\n    clock: $step.updates,\n    filter: function (status) { return Boolean(status); },\n    target: spread({\n        targets: {\n            name: nameChanged,\n            description: descriptionChanged,\n        },\n    }),\n});\nsample({\n    clock: submited,\n    source: {\n        step: $step,\n        name: $name,\n        description: $description,\n    },\n    filter: $canSubmit,\n    fn: function (_a) {\n        var step = _a.step, name = _a.name, description = _a.description;\n        return ({\n            custom_strategy_step_id: step.custom_strategy_step_id,\n            name: name,\n            description: description,\n            comment: step.comment,\n        });\n    },\n    target: update.submited,\n});\nsample({\n    clock: update.done,\n    fn: function (step) { return step.custom_strategy_id; },\n    target: $$activeStrategy.requestes.steps.submited,\n});\nsample({\n    clock: update.done,\n    fn: function () { return 'Изменения сохранены'; },\n    target: $$alerts.showSuccess,\n});\nexport var $$editStepModal = __assign(__assign({}, update), { $show: $show, $name: $name, $description: $description, $canSubmit: $canSubmit, opened: opened, closed: closed, nameChanged: nameChanged, descriptionChanged: descriptionChanged, submited: submited });\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { $$editStepModal } from './model';\nimport './style.scss';\nimport { Form, MemoButton } from '@/shared/components';\nimport classNames from 'classnames';\nimport { useUnit } from 'effector-react';\nimport { memo } from 'react';\nimport { Col, Modal, Row } from 'react-bootstrap';\nexport var EditStepModal = function (_a) {\n    var className = _a.className;\n    // Effector\n    var _b = useUnit([$$editStepModal.$show, $$editStepModal.closed]), show = _b[0], closed = _b[1];\n    var _c = useUnit([$$editStepModal.$name, $$editStepModal.$description]), name = _c[0], description = _c[1];\n    var _d = useUnit([\n        $$editStepModal.nameChanged,\n        $$editStepModal.descriptionChanged,\n    ]), nameChanged = _d[0], descriptionChanged = _d[1];\n    var _e = useUnit([$$editStepModal.submited, $$editStepModal.$canSubmit]), submited = _e[0], canSubmit = _e[1];\n    // Variables\n    var ClassName = classNames('edit-status-modal', className);\n    return (_jsxs(Modal, { className: ClassName, show: show, onHide: closed, centered: true, children: [_jsx(Modal.Header, { children: _jsx(Modal.Title, { children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0448\\u0430\\u0433\\u0430\" }) }), _jsx(Modal.Body, { children: _jsx(Form, { onSubmit: submited, children: _jsxs(Row, { className: \"custom-row\", children: [_jsx(Col, { xs: 12, children: _jsx(Form.Input, { label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\", value: name, onChange: nameChanged }) }), _jsx(Col, { xs: 12, children: _jsx(Form.Input, { type: \"textarea\", label: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\", value: description, onChange: descriptionChanged }) })] }) }) }), _jsxs(Modal.Footer, { children: [_jsx(MemoButton, { disabled: !canSubmit, onClick: submited, children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\" }), _jsx(MemoButton, { variant: \"secondary\", onClick: closed, children: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\" })] })] }));\n};\nexport var MemoEditStepModal = memo(EditStepModal);\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { STEP_NODE_HEIGHT, STEP_NODE_WIDTH } from '../../consts';\nimport { MemoEditStepModal } from '../../modals/edit-step-modal';\nimport { $$editStepModal } from '../../modals/edit-step-modal/model';\nimport { MemoBaseNode } from '../base-node';\nimport './style.scss';\nimport classNames from 'classnames';\nimport { useUnit } from 'effector-react';\nimport { memo, useCallback } from 'react';\nexport var StepNode = function (_a) {\n    var className = _a.className, data = _a.data, inputs = _a.inputs, outputs = _a.outputs;\n    // Effector\n    var opened = useUnit($$editStepModal.opened);\n    // Variables\n    var ClassName = classNames('step-node', className);\n    var step = data;\n    // Handlers\n    var handleClick = useCallback(function () {\n        if (!data) {\n            return;\n        }\n        opened(data.custom_strategy_step_id);\n    }, [data, opened]);\n    if (!data) {\n        return null;\n    }\n    return (_jsxs(_Fragment, { children: [_jsx(MemoBaseNode, { className: ClassName, width: STEP_NODE_WIDTH, height: STEP_NODE_HEIGHT, title: \"\\u0428\\u0430\\u0433\", inputPort: inputs.length ? inputs[0] : undefined, outputPort: outputs.length ? outputs[0] : undefined, onClick: handleClick, children: _jsx(\"div\", { className: \"step-node__info\", children: _jsx(\"div\", { className: \"step-node__name\", children: step.name }) }) }), _jsx(MemoEditStepModal, {})] }));\n};\nexport var MemoStepNode = memo(StepNode);\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { customStrategyStepResult } from '@/shared/api';\nimport { $$activeStrategy, $$alerts } from '@/shared/effector';\nimport { RequestFactory } from '@/shared/factories';\nimport { combine, createEvent, createStore, sample } from 'effector';\nimport { spread } from 'patronum';\nvar update = RequestFactory({\n    name: 'UPDATE_CUSTOM_STRATEGY_STEP_RESULT',\n    api: customStrategyStepResult.update,\n});\nvar $show = createStore(false);\nvar $stepResultId = createStore(null);\nvar $stepResult = combine($$activeStrategy.$stepResults, $stepResultId, function (statuses, id) {\n    return statuses.find(function (status) { return status.custom_strategy_step_result_id === id; });\n});\nvar $name = createStore('');\nvar $description = createStore('');\nvar $canSubmit = combine($name, $description, function (name, description) { return !!name && !!description; });\nvar opened = createEvent();\nvar closed = createEvent();\nvar nameChanged = createEvent();\nvar descriptionChanged = createEvent();\nvar submited = createEvent();\n$show.on(opened, function () { return true; });\n$show.on(closed, function () { return false; });\n$show.on(update.done, function () { return false; });\n$stepResultId.on(opened, function (_, id) { return id; });\n$name.on(nameChanged, function (_, value) { return value; });\n$description.on(descriptionChanged, function (_, value) { return value; });\nsample({\n    clock: $stepResult.updates,\n    filter: function (stepResult) { return Boolean(stepResult); },\n    target: spread({\n        targets: {\n            result_name: nameChanged,\n            result_description: descriptionChanged,\n        },\n    }),\n});\nsample({\n    clock: submited,\n    source: {\n        stepResult: $stepResult,\n        name: $name,\n        description: $description,\n    },\n    filter: $canSubmit,\n    fn: function (_a) {\n        var stepResult = _a.stepResult, name = _a.name, description = _a.description;\n        return ({\n            custom_strategy_step_id: stepResult.custom_strategy_step_id,\n            custom_strategy_status_id: stepResult.custom_strategy_status_id,\n            custom_strategy_step_result_id: stepResult.custom_strategy_step_result_id,\n            result_name: name,\n            result_description: description,\n        });\n    },\n    target: update.submited,\n});\nsample({\n    clock: update.done,\n    source: $$activeStrategy.$strategy,\n    fn: function (strategy) { return strategy.custom_strategy_id; },\n    target: $$activeStrategy.requestes.stepResults.submited,\n});\nsample({\n    clock: update.done,\n    fn: function () { return 'Изменения сохранены'; },\n    target: $$alerts.showSuccess,\n});\nexport var $$editStepResultModal = __assign(__assign({}, update), { $show: $show, $name: $name, $description: $description, $canSubmit: $canSubmit, opened: opened, closed: closed, nameChanged: nameChanged, descriptionChanged: descriptionChanged, submited: submited });\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { $$editStepResultModal } from './model';\nimport './style.scss';\nimport { Form, MemoButton } from '@/shared/components';\nimport classNames from 'classnames';\nimport { useUnit } from 'effector-react';\nimport { memo } from 'react';\nimport { Col, Modal, Row } from 'react-bootstrap';\nexport var EditStepResultModal = function (_a) {\n    var className = _a.className;\n    // Effector\n    var _b = useUnit([$$editStepResultModal.$show, $$editStepResultModal.closed]), show = _b[0], closed = _b[1];\n    var _c = useUnit([\n        $$editStepResultModal.$name,\n        $$editStepResultModal.$description,\n    ]), name = _c[0], description = _c[1];\n    var _d = useUnit([\n        $$editStepResultModal.nameChanged,\n        $$editStepResultModal.descriptionChanged,\n    ]), nameChanged = _d[0], descriptionChanged = _d[1];\n    var _e = useUnit([\n        $$editStepResultModal.submited,\n        $$editStepResultModal.$canSubmit,\n    ]), submited = _e[0], canSubmit = _e[1];\n    // Variables\n    var ClassName = classNames('edit-step-result-modal', className);\n    return (_jsxs(Modal, { className: ClassName, show: show, onHide: closed, centered: true, children: [_jsx(Modal.Header, { children: _jsx(Modal.Title, { children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u0430\" }) }), _jsx(Modal.Body, { children: _jsx(Form, { onSubmit: submited, children: _jsxs(Row, { className: \"custom-row\", children: [_jsx(Col, { xs: 12, children: _jsx(Form.Input, { label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\", value: name, onChange: nameChanged }) }), _jsx(Col, { xs: 12, children: _jsx(Form.Input, { type: \"textarea\", label: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\", value: description, onChange: descriptionChanged }) })] }) }) }), _jsxs(Modal.Footer, { children: [_jsx(MemoButton, { disabled: !canSubmit, onClick: submited, children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\" }), _jsx(MemoButton, { variant: \"secondary\", onClick: closed, children: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\" })] })] }));\n};\nexport var MemoEditStepResultModal = memo(EditStepResultModal);\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { STEP_RESULT_NODE_HEIGHT, STEP_RESULT_NODE_WIDTH } from '../../consts';\nimport { MemoEditStepResultModal } from '../../modals/edit-step-result-modal';\nimport { $$editStepResultModal } from '../../modals/edit-step-result-modal/model';\nimport { MemoBaseNode } from '../base-node';\nimport './style.scss';\nimport classNames from 'classnames';\nimport { useUnit } from 'effector-react';\nimport { memo, useCallback } from 'react';\nexport var StepResultNode = function (_a) {\n    var className = _a.className, data = _a.data, inputs = _a.inputs, outputs = _a.outputs;\n    // Effector\n    var opened = useUnit($$editStepResultModal.opened);\n    // Variables\n    var ClassName = classNames('step-result-node', className);\n    var stepResult = data;\n    // Handlers\n    var handleClick = useCallback(function () {\n        if (!data) {\n            return;\n        }\n        opened(data.custom_strategy_step_result_id);\n    }, [data, opened]);\n    if (!data) {\n        return null;\n    }\n    return (_jsxs(_Fragment, { children: [_jsx(MemoBaseNode, { className: ClassName, width: STEP_RESULT_NODE_WIDTH, height: STEP_RESULT_NODE_HEIGHT, title: \"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\", inputPort: inputs.length ? inputs[0] : undefined, outputPort: outputs.length ? outputs[0] : undefined, onClick: handleClick, children: _jsx(\"div\", { className: \"step-result-node__info\", children: _jsx(\"div\", { className: \"step-result-node__name\", children: stepResult.result_name }) }) }), _jsx(MemoEditStepResultModal, {})] }));\n};\nexport var MemoStepResultNode = memo(StepResultNode);\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { NODE_SPACING, STATUS_NODE_WIDTH, STEP_NODE_WIDTH, STEP_RESULT_NODE_HEIGHT, STEP_RESULT_NODE_WIDTH, } from './consts';\n//* Node Factories\nexport function statusNodeFactory(status, coordinates, render, hasInput, hasOutput) {\n    if (hasInput === void 0) { hasInput = false; }\n    if (hasOutput === void 0) { hasOutput = false; }\n    var id = \"status-\".concat(status.custom_strategy_status_id);\n    return {\n        id: id,\n        disableDrag: true,\n        data: status,\n        coordinates: coordinates,\n        render: render,\n        inputs: hasInput ? [{ id: \"input-\".concat(id), alignment: 'left' }] : undefined,\n        outputs: hasOutput ? [{ id: \"output-\".concat(id), alignment: 'right' }] : undefined,\n        linksTreeType: 'status',\n    };\n}\nexport function stepNodeFactory(step, coordinates, render, hasInput, hasOutput) {\n    if (hasInput === void 0) { hasInput = false; }\n    if (hasOutput === void 0) { hasOutput = false; }\n    var id = \"step-\".concat(step.custom_strategy_step_id);\n    return {\n        id: id,\n        disableDrag: true,\n        data: step,\n        coordinates: coordinates,\n        render: render,\n        inputs: hasInput ? [{ id: \"input-\".concat(id), alignment: 'left' }] : undefined,\n        outputs: hasOutput ? [{ id: \"output-\".concat(id), alignment: 'right' }] : undefined,\n        linksTreeType: 'step',\n    };\n}\nexport function stepResultNodeFactory(stepResult, coordinates, render, hasInput, hasOutput) {\n    if (hasInput === void 0) { hasInput = false; }\n    if (hasOutput === void 0) { hasOutput = false; }\n    var id = \"step-result-\".concat(stepResult.custom_strategy_step_result_id);\n    return {\n        id: id,\n        disableDrag: true,\n        data: stepResult,\n        coordinates: coordinates,\n        render: render,\n        inputs: hasInput ? [{ id: \"input-\".concat(id), alignment: 'left' }] : undefined,\n        outputs: hasOutput ? [{ id: \"output-\".concat(id), alignment: 'right' }] : undefined,\n        linksTreeType: 'step-result',\n    };\n}\n//* Links Tree Factories\nfunction statusLinkFactory(status, steps, stepResults, statuses, coordinates, StatusNode, StepNode, StepResultNode, hasInput) {\n    if (hasInput === void 0) { hasInput = false; }\n    var x = coordinates[0], y = coordinates[1];\n    var children = status.custom_strategy_next_step_id\n        ? [\n            stepLinkFactory(steps.find(function (step) { return step.custom_strategy_step_id === status.custom_strategy_next_step_id; }), steps, stepResults, statuses, [x + NODE_SPACING + STATUS_NODE_WIDTH, y], StatusNode, StepNode, StepResultNode, true),\n        ]\n        : [];\n    return {\n        name: \"status-\".concat(status.custom_strategy_status_id),\n        type: 'status',\n        node: statusNodeFactory(status, coordinates, StatusNode, hasInput, Boolean(children.length)),\n        children: children,\n        coordinates: coordinates,\n    };\n}\nfunction stepLinkFactory(step, steps, stepResults, statuses, coordinates, StatusNode, StepNode, StepResultNode, hasInput) {\n    if (hasInput === void 0) { hasInput = false; }\n    var x = coordinates[0], y = coordinates[1];\n    var children = stepResults\n        .filter(function (result) { return result.custom_strategy_step_id === step.custom_strategy_step_id; })\n        .map(function (stepResult, index) {\n        return stepResultLinkFactory(stepResult, steps, stepResults, statuses, [x + NODE_SPACING + STEP_NODE_WIDTH, y + index * (NODE_SPACING + STEP_RESULT_NODE_HEIGHT)], StatusNode, StepNode, StepResultNode, true);\n    });\n    return {\n        name: \"step-\".concat(step.custom_strategy_step_id),\n        type: 'step',\n        node: stepNodeFactory(step, coordinates, StepNode, hasInput, Boolean(children.length)),\n        children: children,\n        coordinates: coordinates,\n    };\n}\nfunction stepResultLinkFactory(stepResult, steps, stepResults, statuses, coordinates, StatusNode, StepNode, StepResultNode, hasInput) {\n    if (hasInput === void 0) { hasInput = false; }\n    var x = coordinates[0], y = coordinates[1];\n    return {\n        name: \"step-result-\".concat(stepResult.custom_strategy_step_result_id),\n        type: 'step-result',\n        node: stepResultNodeFactory(stepResult, coordinates, StepResultNode, hasInput, true),\n        children: [\n            statusLinkFactory(statuses.find(function (status) { return status.custom_strategy_status_id === stepResult.custom_strategy_status_id; }), steps, stepResults, statuses, [x + NODE_SPACING + STEP_RESULT_NODE_WIDTH, y], StatusNode, StepNode, StepResultNode, true),\n        ],\n        coordinates: coordinates,\n    };\n}\nexport var linksTreeFactory = function (initialStatus, steps, stepResults, statuses, StatusNode, StepNode, StepResultNode) {\n    return statusLinkFactory(initialStatus, steps, stepResults, statuses, [NODE_SPACING, NODE_SPACING], StatusNode, StepNode, StepResultNode);\n};\nexport function linksTreeToNodes(linksTree) {\n    return __spreadArray([linksTree.node], linksTree.children.flatMap(function (child) { return linksTreeToNodes(child); }), true);\n}\nexport function linksTreeToLinks(linksTree) {\n    var links = linksTree.children.map(function (child) { return ({\n        input: \"output-\".concat(linksTree.name),\n        output: \"input-\".concat(child.name),\n    }); });\n    return __spreadArray(__spreadArray([], links, true), linksTree.children.flatMap(function (child) { return linksTreeToLinks(child); }), true);\n}\n","import { NODE_HEIGHTS, NODE_SPACING, NODE_WIDTHS } from './consts';\nimport { StatusNode, StepNode, StepResultNode } from './nodes';\nimport { linksTreeFactory, linksTreeToLinks, linksTreeToNodes } from './utils';\nimport { $$activeStrategy } from '@/shared/effector';\nimport { createSchema, useSchema } from 'beautiful-react-diagrams';\nimport { useUnit } from 'effector-react';\nimport { useEffect, useMemo } from 'react';\nexport var useStrategyDiagram = function () {\n    // Effector\n    var _a = useUnit([\n        $$activeStrategy.$steps,\n        $$activeStrategy.$stepResults,\n        $$activeStrategy.$statuses,\n    ]), steps = _a[0], stepResults = _a[1], statuses = _a[2];\n    console.log(\"statuses statuses statuses\", statuses);\n    var requestStatuses = useUnit([\n        $$activeStrategy.$stepsStatus,\n        $$activeStrategy.$stepResultsStatus,\n        $$activeStrategy.$statusesStatus,\n    ]);\n    // Variables\n    var pending = requestStatuses.some(function (status) { return status === 'pending'; });\n    // Memo\n    var linksTree = useMemo(function () {\n        if (pending) {\n            return null;\n        }\n        return linksTreeFactory(statuses[0], steps, stepResults, statuses, StatusNode, StepNode, StepResultNode);\n    }, [pending, statuses, stepResults, steps]);\n    var nodes = useMemo(function () { return (linksTree ? linksTreeToNodes(linksTree) : []); }, [linksTree]);\n    var links = useMemo(function () { return (linksTree ? linksTreeToLinks(linksTree) : []); }, [linksTree]);\n    var _b = useMemo(function () {\n        var maxWidth = 0;\n        var maxHeight = 0;\n        nodes.forEach(function (node) {\n            maxWidth = Math.max(maxWidth, node.coordinates[0] + NODE_SPACING + NODE_WIDTHS[node.linksTreeType]);\n            maxHeight = Math.max(maxHeight, node.coordinates[1] + NODE_SPACING + NODE_HEIGHTS[node.linksTreeType]);\n        });\n        return [maxWidth, maxHeight];\n    }, [nodes]), maxWidth = _b[0], maxHeight = _b[1];\n    var innerSchema = useMemo(\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    function () { return (pending ? createSchema({ nodes: [], links: [] }) : createSchema({ nodes: nodes, links: links })); }, [links, nodes, pending]);\n    var _c = useSchema(innerSchema), schema = _c[0], onChange = _c[1].onChange;\n    useEffect(function () {\n        onChange(innerSchema);\n    }, [innerSchema, onChange]);\n    return {\n        schema: schema,\n        pending: pending,\n        maxWidth: maxWidth,\n        linksCount: links.length,\n        maxHeight: maxHeight,\n    };\n};\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { NODE_SPACING, STATUS_NODE_HEIGHT, STATUS_NODE_WIDTH, STEP_NODE_HEIGHT, STEP_NODE_WIDTH, STEP_RESULT_NODE_HEIGHT, STEP_RESULT_NODE_WIDTH, } from './consts';\nimport { BaseNode } from './nodes';\nimport './style.scss';\nimport { Diagram, createSchema, useSchema } from 'beautiful-react-diagrams';\nimport 'beautiful-react-diagrams/styles.css';\nimport classNames from 'classnames';\nimport { memo } from 'react';\nimport Skeleton from 'react-loading-skeleton';\nvar initialSchema = createSchema({\n    nodes: [\n        {\n            id: 'node-1',\n            content: 'Node 1',\n            disableDrag: true,\n            render: function () { return (_jsx(BaseNode, { title: _jsx(Skeleton, {}), width: STATUS_NODE_WIDTH, height: STATUS_NODE_HEIGHT, children: _jsx(Skeleton, { containerClassName: \"skeleton-node__info\", className: \"skeleton-node__name\", width: 80 }) })); },\n            coordinates: [NODE_SPACING, NODE_SPACING],\n        },\n        {\n            id: 'node-2',\n            content: 'Node 2',\n            disableDrag: true,\n            render: function () { return (_jsx(BaseNode, { title: _jsx(Skeleton, {}), width: STEP_NODE_WIDTH, height: STEP_NODE_HEIGHT, children: _jsx(Skeleton, { containerClassName: \"skeleton-node__info\", className: \"skeleton-node__name\", width: 120 }) })); },\n            coordinates: [NODE_SPACING * 2 + STATUS_NODE_WIDTH, NODE_SPACING],\n        },\n        {\n            id: 'node-3',\n            content: 'Node 3',\n            disableDrag: true,\n            render: function () { return (_jsx(BaseNode, { title: _jsx(Skeleton, {}), width: STEP_RESULT_NODE_WIDTH, height: STEP_RESULT_NODE_HEIGHT, children: _jsx(Skeleton, { containerClassName: \"skeleton-node__info\", className: \"skeleton-node__name\", width: 110 }) })); },\n            coordinates: [NODE_SPACING * 3 + STATUS_NODE_WIDTH + STEP_NODE_WIDTH, NODE_SPACING],\n        },\n    ],\n});\nvar style = {\n    '--diagram-height': \"\".concat(NODE_SPACING * 2 + STATUS_NODE_HEIGHT, \"px\"),\n};\nexport var StrategyDiagram = function (_a) {\n    var className = _a.className;\n    // Schema\n    var schema = useSchema(initialSchema)[0];\n    // Variables\n    var ClassName = classNames('strategy-diagram', 'strategy-diagram--skeleton', className);\n    return (_jsx(\"div\", { className: ClassName, style: style, children: _jsx(Diagram, { schema: schema }) }));\n};\nexport var SkeletonStrategyDiagram = memo(StrategyDiagram);\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useStrategyDiagram } from './hook';\nimport { SkeletonStrategyDiagram } from './skeleton';\nimport './style.scss';\nimport { Diagram } from 'beautiful-react-diagrams';\nimport 'beautiful-react-diagrams/styles.css';\nimport classNames from 'classnames';\nimport { memo, useMemo } from 'react';\nexport var StrategyDiagram = function (_a) {\n    var className = _a.className;\n    // Schema\n    var _b = useStrategyDiagram(), schema = _b.schema, linksCount = _b.linksCount, pending = _b.pending, maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\n    // Variables\n    var ClassName = classNames('strategy-diagram', className);\n    var style = useMemo(function () {\n        return ({\n            '--diagram-width': \"\".concat(maxWidth, \"px\"),\n            '--diagram-height': \"\".concat(maxHeight, \"px\"),\n        });\n    }, [maxHeight, maxWidth]);\n    if (pending) {\n        return _jsx(SkeletonStrategyDiagram, { className: ClassName });\n    }\n    return (_jsx(\"div\", { className: ClassName, style: style, children: _jsx(Diagram, { schema: schema }, linksCount) }));\n};\nexport var MemoStrategyDiagram = memo(StrategyDiagram);\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { $$editStrategyModal } from './model';\nimport './style.scss';\nimport { MemoActiveStrategySelect, MemoResetStrategyButton } from '@/features/strategy';\nimport { Form, MemoButton, PageLayout } from '@/shared/components';\nimport classNames from 'classnames';\nimport { useUnit } from 'effector-react';\nimport { memo } from 'react';\nimport { Col, Row } from 'react-bootstrap';\nexport var EditStrategyForm = function (_a) {\n    var className = _a.className;\n    // Effector\n    var _b = useUnit([$$editStrategyModal.$name, $$editStrategyModal.$description]), name = _b[0], description = _b[1];\n    var _c = useUnit([\n        $$editStrategyModal.nameChanged,\n        $$editStrategyModal.descriptionChanged,\n    ]), nameChanged = _c[0], descriptionChanged = _c[1];\n    var _d = useUnit([\n        $$editStrategyModal.submited,\n        $$editStrategyModal.$canSubmit,\n    ]), submited = _d[0], canSubmit = _d[1];\n    // Variables\n    var ClassName = classNames('edit-strategy-form', className);\n    return (_jsx(PageLayout.Cloud, { header: {\n            title: 'Стратегия',\n            subtitle: 'Редактирование выбранной стратегии',\n        }, className: ClassName, children: _jsx(Form, { footerClassName: \"edit-strategy-form__footer\", footer: _jsxs(_Fragment, { children: [_jsx(MemoButton, { disabled: !canSubmit, onClick: submited, children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\" }), _jsx(MemoResetStrategyButton, {})] }), onSubmit: submited, children: _jsxs(Row, { className: \"custom-row\", children: [_jsx(Col, { xs: 12, children: _jsx(MemoActiveStrategySelect, {}) }), _jsx(Col, { xs: 12, children: _jsx(Form.Input, { size: \"sm\", label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u0438\", value: name, onChange: nameChanged }) }), _jsx(Col, { xs: 12, children: _jsx(Form.Input, { type: \"textarea\", size: \"sm\", label: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\", value: description, onChange: descriptionChanged }) })] }) }) }));\n};\nexport var MemoEditStrategyForm = memo(EditStrategyForm);\n"],"names":["StrategyItemLayout","_a","className","image","title","subtitle","likeButtonSlot","leftButtonSlot","rightButtonSlot","ClassName","children","src","MemoStrategyItemLayout","memo","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","DCustomStrategyContactFactory","contact_id","custom_strategy_status_id","status","DCustomStrategyFactory","strategy","steps","statuses","contacts","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","getAll","name","api","strategies","all","map","StrategyFactory","getContacts","$activeItemId","$activeItem","$items","items","id","find","item","custom_strategy_id","activeChanged","strategyUpdateFx","index","findIndex","cloned","to","from","pack","ar","l","Array","slice","concat","__spreadArray","splice","stepsData","resultsData","statusesData","contactsData","results","_b","LoadStrategyData","DCustomStrategyStatusFactory","DCustomStrategyStepResultFactory","DCustomStrategyStepFactory","filter","custom_strategy_step_id","strategy_id","on","clock","source","target","submited","fn","doneData","StrategyItem","NODE_SPACING","STATUS_NODE_WIDTH","STATUS_NODE_HEIGHT","STEP_NODE_WIDTH","STEP_RESULT_NODE_WIDTH","STEP_RESULT_NODE_HEIGHT","NODE_WIDTHS","NODE_HEIGHTS","update","$show","$statusId","$status","$statuses","$name","$description","$color","$canSubmit","description","color","opened","nameChanged","descriptionChanged","colorChanged","updates","Boolean","spread","targets","global_strategy_status_color_id","activity_flag","custom_strategy_next_step_id","requestes","showSuccess","$$editStatusModal","closed","MemoEditStatusModal","show","_c","_d","_e","canSubmit","_f","colors","Modal","onHide","centered","Header","Title","Body","onSubmit","Row","Col","xs","Input","onChange","type","SimpleColorPicker","color_HEX","pending","Footer","disabled","onClick","variant","BaseNode","width","height","inputPort","outputPort","style","useMemo","cloneElement","MemoBaseNode","StatusNode","data","inputs","outputs","$dictionaryById","colorsStatus","handleClick","useCallback","undefined","containerClassName","backgroundColor","$stepId","$step","$steps","comment","$$editStepModal","MemoEditStepModal","StepNode","$stepResultId","$stepResult","$stepResults","custom_strategy_step_result_id","stepResult","result_name","result_description","$strategy","stepResults","$$editStepResultModal","MemoEditStepResultModal","StepResultNode","statusNodeFactory","coordinates","render","hasInput","hasOutput","disableDrag","alignment","linksTreeType","stepNodeFactory","stepResultNodeFactory","statusLinkFactory","x","stepLinkFactory","node","stepResultLinkFactory","linksTreeToNodes","linksTree","flatMap","child","linksTreeToLinks","links","input","output","useStrategyDiagram","console","log","$stepsStatus","$stepResultsStatus","$statusesStatus","some","initialStatus","linksTreeFactory","nodes","maxWidth","maxHeight","forEach","Math","max","innerSchema","schema","useEffect","linksCount","initialSchema","content","SkeletonStrategyDiagram","MemoStrategyDiagram","MemoEditStrategyForm","Cloud","header","footerClassName","footer","size"],"sourceRoot":""}